(this.webpackJsonpluftmessstationen=this.webpackJsonpluftmessstationen||[]).push([[0],{390:function(e,t,n){},391:function(e,t,n){},715:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(17),o=n.n(r),s=(n(390),n(12)),u=(n(391),n(392),n(393),n(394),n(395),n(25)),l=n(383),c=n(225),d=n(385),f=n(380),v=n(381),b=n(19),g=n.n(b),p=n(44),j=n(157),h=n(49),m=n(226),k=n(21),O=n(14),x="https://wupp-topicmaps-data.cismet.de",y={abgebaut:{color:"#9DBCCC",signature:"Luft_Icon_Messstation_abgebaut_farbig.svg",header:"Messstation f\xfcr NO\u2082 (inaktiv, demontiert)",title:"abgebaut"},inaktiv:{color:"#4FAFC5",signature:"Luft_Icon_Messstation_deaktiv_farbig.svg",header:"Messstation f\xfcr NO\u2082 (aktiv, aktuell Messausfall)",title:"inaktiv"},unauffaellig:{color:"#9ACD32",signature:"Luft_Icon_Messstation_unauffaellig_farbig.svg",header:"Messstation f\xfcr NO\u2082 (aktiv, unauff\xe4llig)",title:"unauff\xe4llig"},auffaellig:{color:"#FFA500",signature:"Luft_Icon_Messstation_auffaellig_farbig.svg",header:"Messstation f\xfcr NO\u2082 (aktiv, auff\xe4llig)",title:"auff\xe4llig"},warnend:{color:"#E01414",signature:"Luft_Icon_Messstation_warnend_farbig.svg",header:"Messstation f\xfcr NO\u2082 (aktiv, warnend)",title:"warnend"},unknown:{color:"#eeeeee",signature:"Platz.svg",header:"Fehler"}},w=["Januar","Februar","M\xe4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],M=function(){var e=Object(p.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.b)("MapData",x+"/data/umweltzonen.json");case 2:n=e.sent,t(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(p.a)(g.a.mark((function e(t){var n,a,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="GazData",a={},e.next=4,Object(h.c)(n,x+"/data/adressen.json");case 4:return a.adressen=e.sent,e.next=7,Object(h.c)(n,x+"/data/bezirke.json");case 7:return a.bezirke=e.sent,e.next=10,Object(h.c)(n,x+"/data/quartiere.json");case 10:return a.quartiere=e.sent,e.next=13,Object(h.c)(n,x+"/data/pois.json");case 13:return a.pois=e.sent,e.next=16,Object(h.c)(n,x+"/data/kitas.json");case 16:return a.kitas=e.sent,e.next=19,Object(h.c)(n,x+"/data/no2.json");case 19:a.no2=e.sent,i=Object(m.b)(a,["no2","pois","kitas","bezirke","quartiere","adressen"]),t(i);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(e){var t=null===e||void 0===e?void 0:e.werte;return void 0!==t&&"{}"!==JSON.stringify(t)},F=function(e){var t=L(e);if(t){var n=t.values,a=t.year;return 13===n.length?{value:n[11],monthIndex:11,year:a}:{value:n[n.length-1],monthIndex:n.length-1,year:a}}},z=function(e){if(C(e)){var t=null===e||void 0===e?void 0:e.werte,n=Object.keys(t).sort();return n[n.length-1]}},I=function(e){if(C(e)){var t=null===e||void 0===e?void 0:e.werte,n=Object.keys(t).sort();if(n.length>1)return n[n.length-2]}},L=function(e){var t=z(e),n=null===e||void 0===e?void 0:e.werte;if(t)return{values:n[t],year:t}},_=function(e){if(e&&13===e.length)return e[12]},N=function(e){return void 0!==(null===e||void 0===e?void 0:e.bis)?"abgebaut":"aktiv"},A=function(e){if("aktiv"===N(e)){var t,n=null===(t=F(e))||void 0===t?void 0:t.value;return n>0&&n<=35?"unauffaellig":n>35&&n<=40?"auffaellig":n>40?"warnend":9999===n?"inaktiv":"unknown"}return N(e)},D=function(e){var t=A(e);return y[t].signature},T=function(){var e=Object(a.useContext)(k.a).selectedFeature;return console.log("selectedFeature.properties",null===e||void 0===e?void 0:e.properties),Object(O.jsx)("div",{})},B=function(e){var t,n=_(null===(t=L(e))||void 0===t?void 0:t.values),a=z(e),i=_(function(e){var t=I(e),n=null===e||void 0===e?void 0:e.werte;if(t)return n[t]}(e)),r=I(e),o="";return(n||i)&&(o="gewichtete Jahresmittelwerte:",n&&(o=o+"\n"+n+" \xb5g/m\xb3 ("+a+")"),i&&(o=o+"\n"+i+" \xb5g/m\xb3 ("+r+")")),o},K=function(e){var t=F(e);if(null===e||void 0===e?void 0:e.bis){var n=new Date(null===e||void 0===e?void 0:e.bis);return"Diese Messstation ist seit ".concat(w[n.getMonth()-1]," ").concat(n.getFullYear()," abmontiert.")}return t?9999!==t.value?t.value+" \xb5g/m\xb3 ("+w[t.monthIndex]+" "+t.year+")":"F\xfcr "+w[t.monthIndex]+" "+t.year+"liefert diese Messstation keinen Messwert":"Diese Messstation ist abmontiert"},P=function(){var e=Object(p.a)(g.a.mark((function e(t){var n,a,i,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.b)(t,(function(e){return"luft/"+D(e)}));case 2:return(n=e.sent).status=A(n),a=(null===n||void 0===n?void 0:n.strasse)+" "+((null===n||void 0===n?void 0:n.hausnummer)||"")+(void 0!==(null===n||void 0===n?void 0:n.zusatzinfo)?" ("+(null===n||void 0===n?void 0:n.zusatzinfo)+")":""),"Feature",!1,i=null===n||void 0===n?void 0:n.geojson,n.color=y[n.status].color,r={header:y[n.status].header,title:K(n),additionalInfo:B(n),subtitle:Object(O.jsxs)("span",{children:[null===n||void 0===n?void 0:n.strasse," ",null===n||void 0===n?void 0:n.hausnummer," ",(null===n||void 0===n?void 0:n.zusatzinfo)&&Object(O.jsxs)("span",{children:["(",null===n||void 0===n?void 0:n.zusatzinfo,")"]})]})},n.info=r,n.foto="https://www.wuppertal.de/geoportal/luftmessstationen/fotos/NO2_test.jpg",e.abrupt("return",{text:a,type:"Feature",selected:false,geometry:i,crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::25832"}},properties:n});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(e){var t=e.filterState;return function(e){var n;return null===t||void 0===t||null===(n=t.stations)||void 0===n?void 0:n.includes(A(e))}},R=n(43),E=n(6),J=n(26),U=n(114),W=n(216),G=n(113),H=n(384),V=n(222),Y=n(219),Q=function(){var e=Object(a.useContext)(J.b).setAppMenuActiveMenuSection,t=Object(a.useContext)(k.a),n=t.filterState,i=(t.filterMode,t.filteredItems),r=t.shownFeatures,o=Object(a.useContext)(k.b),s=o.setFilterState,u=(o.setFilterMode,Object(a.useContext)(k.a).items,[]),l=[],c={mode:"list",resetedFilter:{stations:["unauffaellig","auffaellig","warnend","inaktiv","abgebaut"]},filterMode:"gibtnureinen",filters:[{title:"aktive Messstationen",key:"stations",type:"checkBoxes",values:[{keys:["unauffaellig","auffaellig","warnend","inaktiv"],title:"alle aktiven Stationen"},{key:"unauffaellig",indent:30,title:"nur unaufff\xe4llige Stationen",color:y.unauffaellig.color,icon:"square"},{key:"auffaellig",indent:30,title:"nur auff\xe4llige Stationen",color:y.auffaellig.color,icon:"square"},{key:"warnend",indent:30,title:"nur warnende Stationen",color:y.warnend.color,icon:"square"},{key:"inaktiv",indent:30,title:"nur Stationen mit Messausfall",color:y.inaktiv.color,icon:"square"}],setAll:function(){s(Object(E.a)(Object(E.a)({},n),{},{themen:l}))},setNone:function(){s(Object(E.a)(Object(E.a)({},n),{},{themen:[]}))},colorizer:function(e,t){return t?e.color:"#eeeeee"}},{title:"inaktive Messstationen",key:"stations",type:"checkBoxes",values:[{key:"abgebaut",title:"inaktive Stationen",color:y.inaktiv.color,icon:"square"}],setAll:function(){s(Object(E.a)(Object(E.a)({},n),{},{kategorien:u}))},setNone:function(){s(Object(E.a)(Object(E.a)({},n),{},{kategorien:[]}))}}]};return Object(O.jsx)(W.a,{menuIcon:"bars",menuTitle:"Filter, Einstellungen und Kompaktanleitung",menuIntroduction:Object(O.jsxs)("span",{children:["Benutzen Sie die Auswahlm\xf6glichkeiten unter"," ",Object(O.jsx)(U.Link,{className:"useAClassNameToRenderProperLink",to:"filter",containerId:"myMenu",smooth:!0,delay:100,onClick:function(){return e("filter")},children:"Filter"}),", um die in der Karte angezeigten vorbildlichen Luftmessstationen f\xfcr Stickstoffdioxid (NO\u2082) auf die f\xfcr Sie relevanten Stationen zu beschr\xe4nken. \xdcber"," ",Object(O.jsx)(U.Link,{className:"useAClassNameToRenderProperLink",to:"settings",containerId:"myMenu",smooth:!0,delay:100,onClick:function(){return e("settings")},children:"Einstellungen"})," ","k\xf6nnen Sie die Darstellung der Hintergrundkarte und der Stationen an Ihre Vorlieben anpassen. W\xe4hlen Sie die"," ",Object(O.jsx)(U.Link,{className:"useAClassNameToRenderProperLink",to:"help",containerId:"myMenu",smooth:!0,delay:100,onClick:function(){return e("help")},children:"Kompaktanleitung"})," ","f\xfcr detailliertere Bedienungsinformationen."]}),menuSections:[Object(O.jsx)(G.a,{sectionKey:"filter",sectionTitle:function(){var e,t=(null===i||void 0===i?void 0:i.length)||0;return e=1===t?"Standort":"Standorte","Messstationen der Luftqualit\xe4t (".concat(t," ").concat(e," gefunden, davon ").concat((null===r||void 0===r?void 0:r.length)||"0"," in der Karte)")}(),sectionBsStyle:"primary",sectionContent:Object(O.jsx)(H.a,{filterConfiguration:c})},"filter"),Object(O.jsx)(V.a,{},"settings"),Object(O.jsx)(G.a,{sectionKey:"help",sectionTitle:"Kompaktanleitung",sectionBsStyle:"default",sectionContent:Object(O.jsx)(Y.a,{configs:Object(R.d)("Luftmessstationskarte Wuppertal",undefined)})},"help")]})},X=(n(11),n(140)),Z=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],i=t[1],r=Object(a.useContext)(u.a).location;return Object(a.useEffect)((function(){M(i),document.title="Luftmessstationenskarte Wuppertal"}),[]),Object(O.jsx)(X.a,{featureCollection:n,style:function(e){return{color:"#155317",weight:3,opacity:.5,fillColor:"#155317",fillOpacity:.15}},labeler:function(e){if(((null===r||void 0===r?void 0:r.zoom)||8)>7)return Object(O.jsx)("h3",{style:{color:"#155317",opacity:.7,textShadow:"1px 1px 0px  #000000,-1px 1px 0px  #000000, 1px -1px 0px  #000000, -1px -1px 0px  #000000, 2px 2px 15px #000000"},children:"Umweltzone"})},featureClickHandler:function(){}},"ds")};var $=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],i=t[1];return Object(a.useEffect)((function(){S(i),document.title="Luftmessstationenskarte Wuppertal"}),[]),Object(O.jsx)(u.c,{appKey:"LuftmessstationenWuppertal.TopicMap",featureItemsURL:"https://wupp-topicmaps-data.cismet.de/data/no2.data.json",getFeatureStyler:f.a,featureTooltipFunction:function(e){return null===e||void 0===e?void 0:e.text},convertItemToFeature:P,clusteringOptions:{iconCreateFunction:Object(R.c)(30,(function(e){return e.color}))},additionalLayerConfiguration:{uwz:{title:"Umweltzone",initialActive:!0,layer:Object(O.jsx)(Z,{})}},filterState:{stations:["alle_aktiven","unauffaellig","auffaellig","warnend","inaktiv","abgebaut"]},itemFilterFunction:q,classKeyFunction:function(e){return y[A(e)].title},getColorFromProperties:function(e){return y[A(e)].color},children:Object(O.jsxs)(l.a,{locatorControl:!0,gazData:n,modalMenu:Object(O.jsx)(Q,{}),gazetteerSearchPlaceholder:"Stadtteil | Adresse | POI",infoBox:Object(O.jsx)(d.a,{pixelwidth:350,config:{city:"Wuppertal",navigator:{noun:{singular:"Messstation",plural:"Messstationen"}},noCurrentFeatureTitle:"Keine Messtationen gefunden",noCurrentFeatureContent:""}}),children:[Object(O.jsx)(v.a,{title:"R\xfcckfrage zu den Messwerten",action:function(){var e=document.createElement("a");e.setAttribute("type","hidden");var t="\n",n="mailto:luftreinhaltung@stadt.wuppertal.de?subject=R\xfcckfrage zu Messwerten&body="+encodeURI("Sehr geehrte Damen und Herren,".concat(t).concat(t," zu der Luftmessstationskarte "))+encodeURI("auf".concat(t).concat(t))+"".concat(window.location.href.replace(/&/g,"%26").replace(/#/g,"%23"))+encodeURI("".concat(t)+"".concat(t)+"habe ich folgende Frage:".concat(t)+"".concat(t).concat(t).concat(t).concat(t)+"Mit freundlichen Gr\xfc\xdfen".concat(t)+"".concat(t)+"".concat(t));document.body.appendChild(e),e.href=n,e.click()}}),Object(O.jsx)(c.a,{}),Object(O.jsx)(T,{})]})})},ee=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,721)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),i(e),r(e),o(e)}))};o.a.render(Object(O.jsx)(i.a.StrictMode,{children:Object(O.jsx)($,{})}),document.getElementById("root")),ee()}},[[715,1,2]]]);
//# sourceMappingURL=main.12e6b7d2.chunk.js.map