(this.webpackJsonpluftmessstationen=this.webpackJsonpluftmessstationen||[]).push([[0],{397:function(e,t,n){},398:function(e,t,n){},722:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),o=n(18),r=n.n(o),s=(n(397),n(13)),l=(n(398),n(399),n(400),n(401),n(402),n(27)),c=n(389),u=n(168),d=n(391),f=n(387),v=n(388),b=n(17),g=n.n(b),h=n(35),p=n(159),j=n(19),m="https://wupp-topicmaps-data.cismet.de",O={abgebaut:{color:"#9DBCCC",signature:"Luft_Icon_Messstation_abgebaut_farbig.svg",header:"Messstation f\xfcr NO\u2082 (inaktiv, abmontiert)",title:"abmontiert",filterTitle:"abmontierte"},inaktiv:{color:"#4FAFC5",signature:"Luft_Icon_Messstation_deaktiv_farbig.svg",header:"Messstation f\xfcr NO\u2082 (aktiv, aktuell Messausfall)",title:"inaktiv",filterTitle:"inaktive"},unauffaellig:{color:"#9ACD32",signature:"Luft_Icon_Messstation_unauffaellig_farbig.svg",header:"Messstation f\xfcr NO\u2082 (aktiv, unauff\xe4llig)",title:"unauff\xe4llig",filterTitle:"unauff\xe4llige"},auffaellig:{color:"#FFA500",signature:"Luft_Icon_Messstation_auffaellig_farbig.svg",header:"Messstation f\xfcr NO\u2082 (aktiv, auff\xe4llig)",title:"auff\xe4llig",filterTitle:"auff\xe4llige"},warnend:{color:"#E01414",signature:"Luft_Icon_Messstation_warnend_farbig.svg",header:"Messstation f\xfcr NO\u2082 (aktiv, warnend)",title:"warnend",filterTitle:"warnende"},unknown:{color:"#eeeeee",signature:"Platz.svg",header:"Fehler"}},x=[{name:"Januar",shortname:"Jan."},{name:"Februar",shortname:"Feb."},{name:"M\xe4rz",shortname:"M\xe4r."},{name:"April",shortname:"Apr."},{name:"Mai",shortname:"Mai."},{name:"Juni",shortname:"Jun."},{name:"Juli",shortname:"Jul."},{name:"August",shortname:"Aug."},{name:"September",shortname:"Sep."},{name:"Oktober",shortname:"Okt."},{name:"November",shortname:"Nov."},{name:"Dezember",shortname:"Dez."}],k=n(7),y=function(e){var t=null===e||void 0===e?void 0:e.werte;return void 0!==t&&"{}"!==JSON.stringify(t)},w=function(e){var t=C(e);if(t){var n=t.values,i=t.year;return 13===n.length?{value:n[11],monthIndex:11,year:i}:{value:n[n.length-1],monthIndex:n.length-1,year:i}}},M=function(e){if(y(e)){var t=null===e||void 0===e?void 0:e.werte,n=Object.keys(t).sort();return n[n.length-1]}},S=function(e){if(y(e)){var t=null===e||void 0===e?void 0:e.werte,n=Object.keys(t).sort();if(n.length>1)return n[n.length-2]}},C=function(e){var t=M(e),n=null===e||void 0===e?void 0:e.werte;if(t)return{values:n[t],year:t}},z=function(e){return void 0!==(null===e||void 0===e?void 0:e.bis)?"abgebaut":"aktiv"},F=function(e){if("aktiv"===z(e)){var t,n=null===(t=w(e))||void 0===t?void 0:t.value;return I(n)}return z(e)},I=function(e){return e>0&&e<=35?"unauffaellig":e>35&&e<=40?"auffaellig":e>40?"warnend":9999===e?"inaktiv":"unknown"},L=function(e){var t=F(e);return O[t].signature},N=function(e){var t=M(e),n=S(e),i=null===e||void 0===e?void 0:e.mittelwerte[t],a=null===e||void 0===e?void 0:e.mittelwerte[n],o="";return(i||a)&&(o="gewichtete Jahresmittelwerte:",i&&(o=o+"\n"+i+" \xb5g/m\xb3 ("+t+")"),a&&(o=o+"\n"+a+" \xb5g/m\xb3 ("+n+")")),o},D=function(e){var t=w(e);if(null===e||void 0===e?void 0:e.bis){var n=new Date(null===e||void 0===e?void 0:e.bis);return"Diese Messstation ist seit ".concat(x[n.getMonth()-1].name," ").concat(n.getFullYear()," abmontiert.")}return t?9999!==t.value?t.value+" \xb5g/m\xb3 ("+x[t.monthIndex].name+" "+t.year+")":"F\xfcr "+x[t.monthIndex].name+" "+t.year+"liefert diese Messstation keinen Messwert":"Diese Messstation ist abmontiert"},A=function(){var e=Object(h.a)(g.a.mark((function e(t){var n,i,a,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.b)(t,(function(e){return"luft/"+L(e)}));case 2:return(n=e.sent).status=F(n),i=(null===n||void 0===n?void 0:n.strasse)+" "+((null===n||void 0===n?void 0:n.hausnummer)||"")+(void 0!==(null===n||void 0===n?void 0:n.zusatzinfo)?" ("+(null===n||void 0===n?void 0:n.zusatzinfo)+")":""),"Feature",!1,a=null===n||void 0===n?void 0:n.geojson,n.color=O[n.status].color,o={header:O[n.status].header,title:D(n),additionalInfo:N(n),subtitle:Object(k.jsxs)("span",{children:[null===n||void 0===n?void 0:n.strasse," ",null===n||void 0===n?void 0:n.hausnummer," ",(null===n||void 0===n?void 0:n.zusatzinfo)&&Object(k.jsxs)("span",{children:["(",null===n||void 0===n?void 0:n.zusatzinfo,")"]})]})},n.info=o,(null===n||void 0===n?void 0:n.bild)&&(n.foto="https://www.wuppertal.de/geoportal/luftmessstationen/fotos/"+n.bild),e.abrupt("return",{text:i,type:"Feature",selected:false,geometry:a,crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::25832"}},properties:n});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=n(44),_=n(6),B=n(22),P=n(116),q=n(220),J=n(114),K=n(390),R=n(229),E=n(226),U=function(){var e=Object(i.useContext)(B.b).setAppMenuActiveMenuSection,t=Object(i.useContext)(j.a),n=t.filterState,a=(t.filterMode,t.filteredItems),o=t.shownFeatures,r=Object(i.useContext)(j.b),s=r.setFilterState,l=(r.setFilterMode,Object(i.useContext)(j.a).items,[]),c=[],u={mode:"list",resetedFilter:{stations:["unauffaellig","auffaellig","warnend","inaktiv","abgebaut"]},filterMode:"gibtnureinen",filters:[{title:"aktive Messstationen",key:"stations",type:"checkBoxes",values:[{keys:["unauffaellig","auffaellig","warnend","inaktiv"],title:"alle aktiven Stationen"},{key:"unauffaellig",indent:30,title:"unauff\xe4llige Stationen",color:O.unauffaellig.color,icon:"square",iconPos:"pre"},{key:"auffaellig",indent:30,title:"auff\xe4llige Stationen",color:O.auffaellig.color,icon:"square",iconPos:"pre"},{key:"warnend",indent:30,title:"warnende Stationen",color:O.warnend.color,icon:"square",iconPos:"pre"},{key:"inaktiv",indent:30,title:"Stationen mit Messausfall",color:O.inaktiv.color,icon:"square",iconPos:"pre"}],setAll:function(){s(Object(_.a)(Object(_.a)({},n),{},{themen:c}))},setNone:function(){s(Object(_.a)(Object(_.a)({},n),{},{themen:[]}))},colorizer:function(e,t){return t?e.color:"#eeeeee"}},{title:"inaktive Messstationen",key:"stations",type:"checkBoxes",values:[{key:"abgebaut",title:"abmontierte Stationen",color:O.abgebaut.color,icon:"square",iconPos:"pre"}],setAll:function(){s(Object(_.a)(Object(_.a)({},n),{},{kategorien:l}))},setNone:function(){s(Object(_.a)(Object(_.a)({},n),{},{kategorien:[]}))}}]};return Object(k.jsx)(q.a,{menuIcon:"bars",menuTitle:"Filter, Einstellungen und Kompaktanleitung",menuIntroduction:Object(k.jsxs)("span",{children:["Benutzen Sie die Auswahlm\xf6glichkeiten unter"," ",Object(k.jsx)(P.Link,{className:"useAClassNameToRenderProperLink",to:"filter",containerId:"myMenu",smooth:!0,delay:100,onClick:function(){return e("filter")},children:"Filter"}),", um die in der Karte angezeigten vorbildlichen Luftmessstationen f\xfcr Stickstoffdioxid (NO\u2082) auf die f\xfcr Sie relevanten Stationen zu beschr\xe4nken. \xdcber"," ",Object(k.jsx)(P.Link,{className:"useAClassNameToRenderProperLink",to:"settings",containerId:"myMenu",smooth:!0,delay:100,onClick:function(){return e("settings")},children:"Einstellungen"})," ","k\xf6nnen Sie die Darstellung der Hintergrundkarte und der Stationen an Ihre Vorlieben anpassen. W\xe4hlen Sie die"," ",Object(k.jsx)(P.Link,{className:"useAClassNameToRenderProperLink",to:"help",containerId:"myMenu",smooth:!0,delay:100,onClick:function(){return e("help")},children:"Kompaktanleitung"})," ","f\xfcr detailliertere Bedienungsinformationen."]}),menuSections:[Object(k.jsx)(J.a,{sectionKey:"filter",sectionTitle:function(){var e,t=(null===a||void 0===a?void 0:a.length)||0;return e=1===t?"Standort":"Standorte","Messstationen der Luftqualit\xe4t (".concat(t," ").concat(e," gefunden, davon ").concat((null===o||void 0===o?void 0:o.length)||"0"," in der Karte)")}(),sectionBsStyle:"primary",sectionContent:Object(k.jsx)(K.a,{filterConfiguration:u})},"filter"),Object(k.jsx)(R.a,{previewMapPosition:"lat=51.2607860760692&lng=7.164304562911684&title&zoom=9",previewMapClusteringOptions:void 0},"settings"),Object(k.jsx)(J.a,{sectionKey:"help",sectionTitle:"Kompaktanleitung",sectionBsStyle:"default",sectionContent:Object(k.jsx)(E.a,{configs:Object(T.d)("Luftmessstationskarte Wuppertal",undefined)})},"help")]})},W=function(){var e=Object(i.useContext)(j.a).selectedFeature;return console.log("selectedFeature.properties",null===e||void 0===e?void 0:e.properties),Object(k.jsx)("div",{})},H=n(142),G=n(45),V=function(){var e=Object(h.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(G.b)("MapData",m+"/data/umweltzonen.json");case 2:n=e.sent,t(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(i.useState)([]),t=Object(s.a)(e,2),n=t[0],a=t[1],o=Object(i.useContext)(l.a).location;return Object(i.useEffect)((function(){V(a)}),[]),Object(k.jsx)(H.a,{featureCollection:n,style:function(e){return{color:"#155317",weight:3,opacity:.5,fillColor:"#155317",fillOpacity:.15}},labeler:function(e){if(((null===o||void 0===o?void 0:o.zoom)||8)>7)return Object(k.jsx)("h3",{style:{color:"#155317",opacity:.7,textShadow:"1px 1px 0px  #000000,-1px 1px 0px  #000000, 1px -1px 0px  #000000, -1px -1px 0px  #000000, 2px 2px 15px #000000"},children:"Umweltzone"})},featureClickHandler:function(){}},"ds")},Z=function(e){var t=e.filterState;return function(e){var n;return null===t||void 0===t||null===(n=t.stations)||void 0===n?void 0:n.includes(F(e))}},Q=n(232),X=function(){var e=Object(h.a)(g.a.mark((function e(t){var n,i,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="GazData",i={},e.next=4,Object(G.c)(n,m+"/data/adressen.json");case 4:return i.adressen=e.sent,e.next=7,Object(G.c)(n,m+"/data/bezirke.json");case 7:return i.bezirke=e.sent,e.next=10,Object(G.c)(n,m+"/data/quartiere.json");case 10:return i.quartiere=e.sent,e.next=13,Object(G.c)(n,m+"/data/pois.json");case 13:return i.pois=e.sent,e.next=16,Object(G.c)(n,m+"/data/kitas.json");case 16:return i.kitas=e.sent,e.next=19,Object(G.c)(n,m+"/data/no2.json");case 19:i.no2=e.sent,a=Object(Q.b)(i,["no2","pois","kitas","bezirke","quartiere","adressen"]),t(a);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=n(9),ee=function(e){var t,n,i=e.featureCollectionContext;console.log("featureCollectionContext?.filterState?",null===i||void 0===i?void 0:i.filterState);var a="?";if((null===i||void 0===i||null===(t=i.filteredItems)||void 0===t?void 0:t.length)===(null===i||void 0===i||null===(n=i.items)||void 0===n?void 0:n.length))a=void 0;else{var o,r=null===i||void 0===i||null===(o=i.filterState)||void 0===o?void 0:o.stations;if(r.includes("unauffaellig")&&r.includes("auffaellig")&&r.includes("warnend")&&r.includes("inaktiv"))a="nur aktive Messstationen";else if(1===r.length)a="nur ".concat(O[r[0]].filterTitle," Messstationen");else{var s,l=[],c=Object($.a)(r);try{for(c.s();!(s=c.n()).done;){var u=s.value;l.push(O[u].filterTitle)}}catch(d){c.e(d)}finally{c.f()}a="nur ".concat(l.slice(0,l.length-1).join(", ")," und ").concat(l[l.length-1]," Messstationen")}}return a?Object(k.jsxs)("div",{children:[Object(k.jsx)("b",{children:"Meine Messstationen der Luftqualit\xe4t:"})," ",a]}):void 0},te=n(275),ne=n(392),ie=n(165),ae=n.n(ie),oe=n(118),re=n(49),se=n.n(re),le=n(10),ce=n(24);oe.c.addAdapter(ae.a);var ue=function(){var e=Object(i.useContext)(j.a),t=e.selectedFeature,n=(e.items,Object(i.useContext)(ce.a).windowSize),a=null===t||void 0===t?void 0:t.properties;if(void 0!==a){var o=null===a||void 0===a?void 0:a.foto,r=void 0;void 0!==o&&(r=250);for(var s,l=0,c=0,u=JSON.parse(JSON.stringify(null===a||void 0===a?void 0:a.mittelwerte)),d=[],f=[],v=[],b=[],g=0,h=Object.keys(a.werte);g<h.length;g++)for(var p=h[g],m=a.werte[p],y=0;y<Math.min(m.length,12);++y)-9999===m[y]?c++:l++;if((null===a||void 0===a?void 0:a.werte)&&Object.keys(null===a||void 0===a?void 0:a.werte).length>0){var w=C(a),M=w.values,z=w.year,F=function(e){var t=S(e),n=null===e||void 0===e?void 0:e.werte;if(t)return n[t]}(a),L=[];if(F){var N,D=0,A=Object($.a)(F);try{for(A.s();!(N=A.n()).done;){var T=N.value;L.push({year:z-1,index:D,value:T}),D++}}catch(de){A.e(de)}finally{A.f()}}if(M){var _,B=0,P=Object($.a)(M);try{for(P.s();!(_=P.n()).done;){var q=_.value;L.push({year:z,index:B,value:q}),B++}}catch(de){P.e(de)}finally{P.f()}}s=L.slice(Math.max(L.length-12,0));for(var J=Object.keys(a.werte),K=(new Date).getFullYear(),R=0,E=J;R<E.length;R++){var U=E[R];U<K-11&&delete u[U]}var W,H=Object($.a)(s);try{for(H.s();!(W=H.n()).done;){var G=W.value,V=G.year+" "+x[G.index].shortname;-9999!==G.value?(d.push([V,G.value]),f.push(new se.a(O[I(G.value)].color).fade(.5))):(d.push([V,null]),f.push(null))}}catch(de){H.e(de)}finally{H.f()}for(var Y=0,Z=Object.keys(u);Y<Z.length;Y++){var Q=Z[Y];v.push([Q,u[Q]]),b.push(new se.a(O[I(u[Q])].color).fade(.5))}for(var X=0,ee=Object.keys(u);X<ee.length;X++){var ie=ee[X];v.push([ie,u[ie]])}}var re=[],ue=Object(k.jsxs)("div",{style:{fontSize:"90%",textAlign:"center"},children:[Object(k.jsxs)("div",{children:[Object(k.jsxs)("span",{style:{whiteSpace:"nowrap"},children:[Object(k.jsx)(le.a,{style:{color:O.unauffaellig.color},name:"square"})," unauff\xe4llig"," ","(\u2266 35)"]}),Object(k.jsxs)("span",{style:{whiteSpace:"nowrap",marginLeft:10,marginRight:10},children:[Object(k.jsx)(le.a,{style:{color:O.auffaellig.color},name:"square"})," auff\xe4llig ","(> 35)"]}),(null===n||void 0===n?void 0:n.width)<463&&Object(k.jsx)("br",{}),Object(k.jsxs)("span",{style:{whiteSpace:"nowrap"},children:[Object(k.jsx)(le.a,{style:{color:O.warnend.color},name:"square"})," warnend ","(> 40)"]})]}),Object(k.jsx)("div",{style:{fontSize:"80%"},children:" Messwerte in \xb5g/m\xb3"})]});return void 0===(null===a||void 0===a?void 0:a.bis)&&re.push(Object(k.jsx)(te.a,{bsStyle:"info",header:"NO\u2082-Messwerte der letzten 12 Monate",children:Object(k.jsxs)("div",{style:{fontSize:"115%",padding:"10px",paddingTop:"0px"},children:[ue,Object(k.jsx)(oe.a,{data:[{data:d,library:{backgroundColor:f,borderColor:f,hoverBackgroundColor:f,hoverBorderColor:f,legend:{display:!1,labels:{fontColor:"rgb(255, 99, 132)"}}}}]})]})},"last12")),ae.a.defaults.global.legend.display=!1,Object.keys(v).length>0&&re.push(Object(k.jsx)(te.a,{bsStyle:"warning",header:"NO\u2082-Jahresmittelwerte der letzten zehn Kalenderjahre",children:Object(k.jsxs)("div",{style:{fontSize:"115%",padding:"10px",paddingTop:"0px"},children:[ue,Object(k.jsx)(oe.a,{data:[{data:v,library:{backgroundColor:b,borderColor:b,hoverBackgroundColor:b,hoverBorderColor:b}}]})]})},"average10")),Object(k.jsx)(ne.a,{titleIconName:"info-circle",title:"Datenblatt: Messstation f\xfcr Stickstoffdioxid (NO\u2082)",mainSection:Object(k.jsxs)("div",{style:{width:"100%",minHeight:r},children:[void 0!==o&&Object(k.jsx)("img",{alt:"Bild",style:{paddingLeft:10,paddingRight:10,float:"right",paddingBottom:"5px"},src:o,width:"250"}),Object(k.jsxs)("div",{style:{fontSize:"115%",padding:"10px",paddingTop:"0px"},children:[Object(k.jsx)("b",{children:"Adresse:"}),Object(k.jsxs)("p",{children:[null===a||void 0===a?void 0:a.strasse," ",null===a||void 0===a?void 0:a.hausnummer," ",(null===a||void 0===a?void 0:a.zusatzinfo)&&Object(k.jsxs)("span",{children:["(",null===a||void 0===a?void 0:a.zusatzinfo,")"]})]}),Object(k.jsx)("b",{children:"Stationsaktivit\xe4t:"}),void 0!==(null===a||void 0===a?void 0:a.bis)&&Object(k.jsxs)("p",{children:["Von ",new Date(null===a||void 0===a?void 0:a.von).toLocaleDateString()," bis"," ",new Date(null===a||void 0===a?void 0:a.bis).toLocaleDateString()," generierte diese Station insgesamt"," ",l," NO\u2082-Messwerte (Ausf\xe4lle nicht ber\xfccksichtigt)."]}),void 0===(null===a||void 0===a?void 0:a.bis)&&Object(k.jsxs)("p",{children:["Seit ",new Date(null===a||void 0===a?void 0:a.von).toLocaleDateString()," generierte diese Station"," ",l," NO\u2082-Messwerte (Ausf\xe4lle nicht ber\xfccksichtigt)."]}),Object(k.jsx)("b",{children:"Messausf\xe4lle:"}),c>0&&Object(k.jsxs)("p",{children:["Diese Messstation generierte an ",c," ",1===c?"Monat":"Monaten"," einen Messausfall. Damit besitzt sie eine Zuverl\xe4ssigkeit von"," ",Math.round(l/(l+c)*1e3)/10,"%."]}),0===c&&Object(k.jsx)("p",{children:"Diese Messstation lieferte in jedem Monat der Stationsaktivit\xe4t einen NO\u2082-Messwert. Damit liegt bisher kein Messausfall vor."})]})]}),subSections:re})}return null};var de=function(){var e=Object(i.useState)([]),t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(i.useEffect)((function(){X(a),document.title="Luftmessstationskarte Wuppertal"}),[]),Object(k.jsx)(l.c,{appKey:"LuftmessstationenWuppertal.TopicMap",featureItemsURL:"https://wupp-topicmaps-data.cismet.de/data/no2.data.json",getFeatureStyler:f.a,featureTooltipFunction:function(e){return null===e||void 0===e?void 0:e.text},convertItemToFeature:A,clusteringOptions:{iconCreateFunction:Object(T.c)(30,(function(e){return e.color}))},additionalLayerConfiguration:{uwz:{title:"Umweltzone",initialActive:!0,layer:Object(k.jsx)(Y,{})}},filterState:{stations:["unauffaellig","auffaellig","warnend","inaktiv","abgebaut"]},titleFactory:ee,itemFilterFunction:Z,classKeyFunction:function(e){return O[F(e)].title},getColorFromProperties:function(e){return O[F(e)].color},children:Object(k.jsxs)(c.a,{locatorControl:!0,gazData:n,modalMenu:Object(k.jsx)(U,{}),gazetteerSearchPlaceholder:"Stadtteil | Adresse | POI",infoBox:Object(k.jsx)(d.a,{pixelwidth:350,config:{displaySecondaryInfoAction:!0,city:"Wuppertal",navigator:{noun:{singular:"Messstation",plural:"Messstationen"}},noCurrentFeatureTitle:"Keine Messtationen gefunden",noCurrentFeatureContent:""}}),secondaryInfo:Object(k.jsx)(ue,{}),children:[Object(k.jsx)(v.a,{title:"R\xfcckfrage zu den Messwerten",action:function(){var e=document.createElement("a");e.setAttribute("type","hidden");var t="\n",n="mailto:luftreinhaltung@stadt.wuppertal.de?subject=R\xfcckfrage zu Messwerten&body="+encodeURI("Sehr geehrte Damen und Herren,".concat(t).concat(t," zu der Luftmessstationskarte "))+encodeURI("auf".concat(t).concat(t))+"".concat(window.location.href.replace(/&/g,"%26").replace(/#/g,"%23"))+encodeURI("".concat(t)+"".concat(t)+"habe ich folgende Frage:".concat(t)+"".concat(t).concat(t).concat(t).concat(t)+"Mit freundlichen Gr\xfc\xdfen".concat(t)+"".concat(t)+"".concat(t));document.body.appendChild(e),e.href=n,e.click()}}),Object(k.jsx)(u.a,{}),Object(k.jsx)(W,{})]})})},fe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,728)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,o=t.getLCP,r=t.getTTFB;n(e),i(e),a(e),o(e),r(e)}))};r.a.render(Object(k.jsx)(a.a.StrictMode,{children:Object(k.jsx)(de,{})}),document.getElementById("root")),fe()}},[[722,1,2]]]);
//# sourceMappingURL=main.19d7a35c.chunk.js.map