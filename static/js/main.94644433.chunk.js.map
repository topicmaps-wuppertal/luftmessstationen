{"version":3,"sources":["helper/constants.js","helper/convertItemToFeature.js","Menu.js","helper/LogSelectedFeature.js","Umweltzonenlayer.js","helper/filterFunction.js","helper/getGazData.js","helper/titleFactory.js","SecondaryInfo.js","App.js","reportWebVitals.js","index.js"],"names":["host","LOOKUP","abgebaut","color","signature","header","title","filterTitle","inaktiv","unauffaellig","auffaellig","warnend","unknown","MONTHS","name","shortname","hasValues","item","values","werte","undefined","JSON","stringify","getLastMeasurement","lym","getLastYearMeasurements","lymValues","year","length","value","monthIndex","ly","sortedkeys","Object","keys","sort","getLastYear","getLastYearMinus1Measurements","lym1","getLastYearM1","getActivityStatus","bis","getStatus","getStatus4Value","getSignature","status","getAdditionalInfo","allAvgYears","mittelwerte","last2Years","slice","threshold","Date","getFullYear","avgYears","filter","parseInt","ret","a","b","getTitle","lm","demontage","getMonth","convertItemToFeature","itemIn","addSVGToProps","i","text","strasse","hausnummer","zusatzinfo","geometry","geojson","info","additionalInfo","subtitle","bild","foto","type","selected","crs","properties","MyMenu","setAppMenuActiveMenuSection","useContext","UIDispatchContext","FeatureCollectionContext","filterState","filteredItems","filterMode","shownFeatures","FeatureCollectionDispatchContext","setFilterState","kategorien","setFilterMode","items","themen","filterConfiguration","mode","resetedFilter","stations","filters","key","indent","icon","iconPos","setAll","setNone","colorizer","ModalApplicationMenu","menuIcon","menuTitle","menuIntroduction","className","to","containerId","smooth","delay","onClick","menuSections","Section","sectionKey","sectionTitle","term","count","getFilterHeader","sectionBsStyle","sectionContent","FilterPanel","DefaultSettingsPanel","previewMapPosition","previewMapClusteringOptions","ConfigurableDocBlocks","configs","getSimpleHelpForTM","content","LogSelection","selectedFeature","console","log","getUWZ","setUWZ","md5FetchJSON","uwz","UWZ","useState","location","TopicMapContext","useEffect","featureCollection","style","feature","weight","opacity","fillColor","fillOpacity","labeler","zoom","textShadow","featureClickHandler","itemFilterFunction","includes","getGazData","setGazData","prefix","sources","md5FetchText","adressen","bezirke","quartiere","pois","kitas","no2","gazData","getGazDataForTopicIds","factory","featureCollectionContext","filterDescription","stationsArten","parts","art","push","join","ReactChartkick","addAdapter","Chart","InfoPanel","windowSize","ResponsiveTopicMapContext","station","minHeight4MainSextion","last12","valueCounter","outageCounter","avgs","parse","last12ChartData","last12Colors","avgsChartData","avgsColors","yearValues","Math","min","lastYearValues","lastYear","lastYearM1Values","twoYearVals","index","max","years","currentYear","entry","Color","fade","subSections","legend","fontSize","textAlign","whiteSpace","Icon","marginLeft","marginRight","width","SecondaryInfoPanelSection","bsStyle","padding","paddingTop","data","library","backgroundColor","borderColor","hoverBackgroundColor","hoverBorderColor","display","labels","fontColor","defaults","global","stationsaktivitaet","opendataLink","href","target","twothousandandeight","von","toLocaleDateString","round","SecondaryInfo","titleIconName","mainSection","minHeight","float","alt","paddingLeft","paddingRight","horizontalAlignment","paddingBottom","src","App","document","TopicMapContextProvider","appKey","featureItemsURL","getFeatureStyler","getGTMFeatureStyler","featureTooltipFunction","clusteringOptions","iconCreateFunction","getClusterIconCreatorFunction","props","additionalLayerConfiguration","initialActive","layer","titleFactory","classKeyFunction","getColorFromProperties","TopicMapComponent","locatorControl","modalMenu","gazetteerSearchPlaceholder","infoBox","GenericInfoBoxFromFeature","pixelwidth","config","displaySecondaryInfoAction","city","navigator","noun","singular","plural","noCurrentFeatureTitle","noCurrentFeatureContent","secondaryInfo","ContactButton","action","link","createElement","setAttribute","br","mailToHref","encodeURI","window","replace","body","appendChild","click","FeatureCollection","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"4WAAaA,EAAO,wCAEPC,EAAS,CACpBC,SAAU,CACRC,MAAO,UACPC,UAAW,4CACXC,OAAQ,oDACRC,MAAO,aACPC,YAAa,eAEfC,QAAS,CACPL,MAAO,UACPC,UAAW,2CACXC,OAAQ,2DACRC,MAAO,UACPC,YAAa,2BAEfE,aAAc,CACZN,MAAO,UACPC,UAAW,gDACXC,OAAQ,sDACRC,MAAO,iBACPC,YAAa,mBAEfG,WAAY,CACVP,MAAO,UACPC,UAAW,8CACXC,OAAQ,oDACRC,MAAO,eACPC,YAAa,iBAEfI,QAAS,CACPR,MAAO,UACPC,UAAW,2CACXC,OAAQ,+CACRC,MAAO,UACPC,YAAa,YAEfK,QAAS,CAAET,MAAO,UAAWC,UAAW,YAAaC,OAAQ,WAGlDQ,EAAS,CACpB,CAAEC,KAAM,SAAUC,UAAW,QAC7B,CAAED,KAAM,UAAWC,UAAW,QAC9B,CAAED,KAAM,UAAQC,UAAW,WAC3B,CAAED,KAAM,QAASC,UAAW,QAC5B,CAAED,KAAM,MAAOC,UAAW,QAC1B,CAAED,KAAM,OAAQC,UAAW,QAC3B,CAAED,KAAM,OAAQC,UAAW,QAC3B,CAAED,KAAM,SAAUC,UAAW,QAC7B,CAAED,KAAM,YAAaC,UAAW,QAChC,CAAED,KAAM,UAAWC,UAAW,QAC9B,CAAED,KAAM,WAAYC,UAAW,QAC/B,CAAED,KAAM,WAAYC,UAAW,S,OC/C3BC,EAAY,SAACC,GACjB,IAAMC,EAAM,OAAGD,QAAH,IAAGA,OAAH,EAAGA,EAAME,MACrB,YAAkBC,IAAXF,GAAmD,OAA3BG,KAAKC,UAAUJ,IAG1CK,EAAqB,SAACN,GAC1B,IAAMO,EAAMC,EAAwBR,GAEpC,GAAIO,EAAK,CAAC,IACQE,EAAoBF,EAA5BN,OAAmBS,EAASH,EAATG,KAC3B,OAAyB,KAArBD,EAAUE,OACL,CAAEC,MAAOH,EAAU,IAAKI,WAAY,GAAIH,QAExC,CAAEE,MAAOH,EAAUA,EAAUE,OAAS,GAAIE,WAAYJ,EAAUE,OAAS,EAAGD,UAqB5EF,EAA0B,SAACR,GACtC,IAAMc,EAlBY,SAACd,GACnB,GAAID,EAAUC,GAAO,CACnB,IAAMC,EAAM,OAAGD,QAAH,IAAGA,OAAH,EAAGA,EAAME,MACfa,EAAaC,OAAOC,KAAKhB,GAAQiB,OACvC,OAAOH,EAAWA,EAAWJ,OAAS,IAc7BQ,CAAYnB,GACjBC,EAAM,OAAGD,QAAH,IAAGA,OAAH,EAAGA,EAAME,MACrB,GAAIY,EACF,MAAO,CAAEb,OAAQA,EAAOa,GAAKJ,KAAMI,IAG1BM,EAAgC,SAACpB,GAC5C,IAAMqB,EAlBc,SAACrB,GACrB,GAAID,EAAUC,GAAO,CACnB,IAAMC,EAAM,OAAGD,QAAH,IAAGA,OAAH,EAAGA,EAAME,MACfa,EAAaC,OAAOC,KAAKhB,GAAQiB,OACvC,GAAIH,EAAWJ,OAAS,EACtB,OAAOI,EAAWA,EAAWJ,OAAS,IAa7BW,CAActB,GACrBC,EAAM,OAAGD,QAAH,IAAGA,OAAH,EAAGA,EAAME,MACrB,GAAImB,EACF,OAAOpB,EAAOoB,IAIZE,EAAoB,SAACvB,GACzB,YAAkBG,KAAV,OAAJH,QAAI,IAAJA,OAAA,EAAAA,EAAMwB,KACD,WAEA,SAQEC,EAAY,SAACzB,GACxB,GAAgC,UAA5BuB,EAAkBvB,GAAmB,CAAC,IAAD,EACjCO,EAAG,UAAGD,EAAmBN,UAAtB,aAAG,EAA0BY,MAEtC,OAAOc,EAAgBnB,GAEvB,OAAOgB,EAAkBvB,IAIhB0B,EAAkB,SAACd,GAC9B,OAAIA,EAAQ,GAAKA,GAAS,GACjB,eACEA,EAAQ,IAAMA,GAAS,GACzB,aACEA,EAAQ,GACV,UACY,OAAVA,EACF,UAEA,WAkBLe,EAAe,SAAC3B,GACpB,IAAM4B,EAASH,EAAUzB,GACzB,OAAOhB,EAAO4C,GAAQzC,WAGlB0C,EAAoB,SAAC7B,GACzB,IAAM8B,EAAcd,OAAOC,KAAP,OAAYjB,QAAZ,IAAYA,OAAZ,EAAYA,EAAM+B,aACtCD,EAAYZ,OACZ,IAAMc,EAAaF,EAAYG,OAAO,GAGhCC,GADc,IAAIC,MAAOC,cACC,EAE1BC,EAAWL,EAAWM,QAAO,SAAC5B,GAAD,OAAU6B,SAAS7B,IAASwB,KAE3DM,EAAM,GACVH,EAASnB,MAAK,SAAUuB,EAAGC,GACzB,OAAOH,SAASG,GAAKH,SAASE,MAG9BD,EADsB,IAApBH,EAAS1B,OACL,gFACuB,IAApB0B,EAAS1B,OACZ,gCAEA,gCAnB0B,oBAqBf0B,GArBe,IAqBlC,2BAA6B,CAAC,IAAnB3B,EAAkB,QAC3B8B,EAAMA,EAAM,MAAN,OAAaxC,QAAb,IAAaA,OAAb,EAAaA,EAAM+B,YAAYrB,IAAQ,iBAAaA,EAAO,KAtBjC,8BAyBlC,OAAO8B,GAGHG,EAAW,SAAC3C,GAChB,IAAM4C,EAAKtC,EAAmBN,GAE9B,UAAIA,QAAJ,IAAIA,OAAJ,EAAIA,EAAMwB,IAAK,CACb,IAAMqB,EAAY,IAAIV,KAAJ,OAASnC,QAAT,IAASA,OAAT,EAASA,EAAMwB,KAEjC,MAAM,8BAAN,OACE5B,EAAOiD,EAAUC,YAAYjD,KAD/B,YAEIgD,EAAUT,cAFd,gBAIA,OAAIQ,EACe,OAAbA,EAAGhC,MACEgC,EAAGhC,MAAQ,iBAAahB,EAAOgD,EAAG/B,YAAYhB,KAAO,IAAM+C,EAAGlC,KAAO,IAG1E,UACAd,EAAOgD,EAAG/B,YAAYhB,KACtB,IACA+C,EAAGlC,KACH,4CAIG,oCAiDEqC,EA5CW,uCAAG,WAAOC,GAAP,qBAAAP,EAAA,sEAGVQ,YAAcD,GAAQ,SAACE,GAAD,MAAO,QAAUvB,EAAauB,MAH1C,cAGvBlD,EAHuB,QAItB4B,OAASH,EAAUzB,GAClBmD,GACA,OAAJnD,QAAI,IAAJA,OAAA,EAAAA,EAAMoD,SACN,MACK,OAAJpD,QAAI,IAAJA,OAAA,EAAAA,EAAMqD,aAAc,UACClD,KAAjB,OAAJH,QAAI,IAAJA,OAAA,EAAAA,EAAMsD,YAA2B,aAAOtD,QAAP,IAAOA,OAAP,EAAOA,EAAMsD,YAAa,IAAM,IAEvD,WACI,EACXC,EAbqB,OAaVvD,QAbU,IAaVA,OAbU,EAaVA,EAAMwD,QACvBxD,EAAKd,MAAQF,EAAOgB,EAAK4B,QAAQ1C,MAC3BuE,EAAO,CACXrE,OAAQJ,EAAOgB,EAAK4B,QAAQxC,OAC5BC,MAAOsD,EAAS3C,GAChB0D,eAAgB7B,EAAkB7B,GAClC2D,SACE,wCACG3D,QADH,IACGA,OADH,EACGA,EAAMoD,QADT,WACmBpD,QADnB,IACmBA,OADnB,EACmBA,EAAMqD,WADzB,KAC0C,OAAJrD,QAAI,IAAJA,OAAA,EAAAA,EAAMsD,aAAc,4CAAQtD,QAAR,IAAQA,OAAR,EAAQA,EAAMsD,WAAd,WAI9DtD,EAAKyD,KAAOA,GACZ,OAAIzD,QAAJ,IAAIA,OAAJ,EAAIA,EAAM4D,QACR5D,EAAK6D,KAAO,8DAAgE7D,EAAK4D,MA3BxD,kBA8BpB,CACLT,OACAW,KArBW,UAsBXC,SArBe,MAsBfR,WACAS,IAAK,CACHF,KAAM,OACNG,WAAY,CACVpE,KAAM,gCAGVoE,WAAYjE,IAzCa,4CAAH,sD,6ECyDXkE,EAjNA,WAAO,IACZC,EAAgCC,qBAAWC,KAA3CF,4BADW,EAE+CC,qBAChEE,KADMC,EAFW,EAEXA,YAAyBC,GAFd,EAEEC,WAFF,EAEcD,eAAeE,EAF7B,EAE6BA,cAF7B,EAKuBN,qBAAWO,KAA7CC,EALW,EAKXA,eAIFC,GATa,EAKKC,cAENV,qBAAWE,KAArBS,MAEW,IAEbC,EAAS,GAmBTC,EAAsB,CAC1BC,KAAM,OACNC,cAAe,CACbC,SAAU,CAAC,eAAgB,aAAc,UAAW,UAAW,aAEjEX,WAAY,eACZY,QAAS,CACP,CACEhG,MAAO,uBACPiG,IAAK,WACLxB,KAAM,aACN7D,OAAQ,CACN,CACEgB,KAAM,CAAC,eAAgB,aAAc,UAAW,WAChD5B,MAAO,0BAET,CACEiG,IAAK,eACLC,OAAQ,GACRlG,MAAO,4BACPH,MAAOF,EAAOQ,aAAaN,MAC3BsG,KAAM,SACNC,QAAS,OAEX,CACEH,IAAK,aACLC,OAAQ,GACRlG,MAAO,0BACPH,MAAOF,EAAOS,WAAWP,MACzBsG,KAAM,SACNC,QAAS,OAEX,CACEH,IAAK,UACLC,OAAQ,GACRlG,MAAO,qBACPH,MAAOF,EAAOU,QAAQR,MACtBsG,KAAM,SACNC,QAAS,OAEX,CACEH,IAAK,UACLC,OAAQ,GACRlG,MAAO,4BACPH,MAAOF,EAAOO,QAAQL,MACtBsG,KAAM,SACNC,QAAS,QAGbC,OAAQ,WACNd,EAAe,2BAAKL,GAAN,IAAmBS,aAEnCW,QAAS,WACPf,EAAe,2BAAKL,GAAN,IAAmBS,OAAQ,OAE3CY,UAAW,SAAC5F,EAAM+D,GAAP,OAAqBA,EAAW/D,EAAKd,MAAQ,YAE1D,CACEG,MAAO,yBACPiG,IAAK,WACLxB,KAAM,aACN7D,OAAQ,CACN,CACEqF,IAAK,WACLjG,MAAO,wBACPH,MAAOF,EAAOC,SAASC,MACvBsG,KAAM,SACNC,QAAS,QAGbC,OAAQ,WACNd,EAAe,2BAAKL,GAAN,IAAmBM,iBAEnCc,QAAS,WACPf,EAAe,2BAAKL,GAAN,IAAmBM,WAAY,UAmCrD,OACE,cAACgB,EAAA,EAAD,CACEC,SAAU,OACVC,UAAW,6CACXC,iBACE,kFAC8C,IAC5C,cAAC,OAAD,CACEC,UAAU,kCACVC,GAAG,SACHC,YAAY,SACZC,QAAQ,EACRC,MAAO,IACPC,QAAS,kBAAMnC,EAA4B,WAN7C,oBAFF,0KAakE,IAChE,cAAC,OAAD,CACE8B,UAAU,kCACVC,GAAG,WACHC,YAAY,SACZC,QAAQ,EACRC,MAAO,IACPC,QAAS,kBAAMnC,EAA4B,aAN7C,2BASQ,IAvBV,qHAyB2B,IACzB,cAAC,OAAD,CACE8B,UAAU,kCACVC,GAAG,OACHC,YAAY,SACZC,QAAQ,EACRC,MAAO,IACPC,QAAS,kBAAMnC,EAA4B,SAN7C,8BASQ,IAnCV,oDAuCFoC,aAAc,CACZ,cAACC,EAAA,EAAD,CAEEC,WAAW,SACXC,aA5KgB,WACtB,IAEIC,EAFEC,GAAqB,OAAbpC,QAAa,IAAbA,OAAA,EAAAA,EAAe7D,SAAU,EASvC,OALEgG,EADY,IAAVC,EACK,WAEA,YAGH,sCAAN,OAA0CA,EAA1C,YAAmDD,EAAnD,6BACe,OAAbjC,QAAa,IAAbA,OAAA,EAAAA,EAAe/D,SAAU,IAD3B,kBAkKoBkG,GACdC,eAAe,UACfC,eAAgB,cAACC,EAAA,EAAD,CAAa/B,oBAAqBA,KAJ9C,UAMN,cAACgC,EAAA,EAAD,CACEC,mBAAmB,0DACnBC,iCAA6BhH,GACzB,YAEN,cAACqG,EAAA,EAAD,CAEEC,WAAW,OACXC,aAAa,mBACbI,eAAe,UACfC,eACE,cAACK,EAAA,EAAD,CAAuBC,QAASC,YA7LpB,kCAgGH,CACjBC,QAAQ,g1EAuFE,YCzMCC,EAPM,WAAO,IAClBC,EAAoBrD,qBAAWE,KAA/BmD,gBAGR,OAFAC,QAAQC,IAAI,6BAAZ,OAA0CF,QAA1C,IAA0CA,OAA1C,EAA0CA,EAAiBxD,YAEpD,yB,iBCDH2D,EAAM,uCAAG,WAAOC,GAAP,eAAApF,EAAA,sEACKqF,YAAa,UAAW/I,EAAO,0BADpC,OACPgJ,EADO,OAEbF,EAAOE,GAFM,2CAAH,sDA+CGC,EA1CH,WAAO,IAAD,EACMC,mBAAS,IADf,mBACTF,EADS,KACJF,EADI,KAERK,EAAa9D,qBAAW+D,KAAxBD,SAKR,OAJAE,qBAAU,WACRR,EAAOC,KACN,IAGD,cAAC,IAAD,CAEEQ,kBAAmBN,EACnBO,MAAO,SAACC,GAQN,MAPc,CACZrJ,MAAO,UACPsJ,OAAQ,EACRC,QAAS,GACTC,UAAW,UACXC,YAAa,MAIjBC,QAAS,SAACL,GAER,KAD4B,OAARL,QAAQ,IAARA,OAAA,EAAAA,EAAUW,OAAQ,GACpB,EAChB,OACE,oBACEP,MAAO,CACLpJ,MAAO,UACPuJ,QAAS,GACTK,WACE,mHALN,yBAaNC,oBAAqB,cA7BhB,OCbIC,EALY,SAAC,GAAqB,IAAnBzE,EAAkB,EAAlBA,YAC5B,OAAO,SAACvE,GAAU,IAAD,EACf,cAAOuE,QAAP,IAAOA,GAAP,UAAOA,EAAaa,gBAApB,aAAO,EAAuB6D,SAASxH,EAAUzB,M,SCAxCkJ,EAAU,uCAAG,WAAOC,GAAP,mBAAA1G,EAAA,6DAClB2G,EAAS,UACTC,EAAU,GAFQ,SAICC,YAAaF,EAAQrK,EAAO,uBAJ7B,cAIxBsK,EAAQE,SAJgB,gBAKAD,YAAaF,EAAQrK,EAAO,sBAL5B,cAKxBsK,EAAQG,QALgB,iBAMEF,YAAaF,EAAQrK,EAAO,wBAN9B,eAMxBsK,EAAQI,UANgB,iBAOHH,YAAaF,EAAQrK,EAAO,mBAPzB,eAOxBsK,EAAQK,KAPgB,iBAQFJ,YAAaF,EAAQrK,EAAO,oBAR1B,eAQxBsK,EAAQM,MARgB,iBASJL,YAAaF,EAAQrK,EAAO,kBATxB,QASxBsK,EAAQO,IATgB,OAWlBC,EAAUC,YAAsBT,EAAS,CAC7C,MACA,OACA,QACA,UACA,YACA,aAGFF,EAAWU,GApBa,4CAAH,sD,SCiERE,GApEC,SAAC,GAAkC,IAAD,IAA/BC,EAA+B,EAA/BA,yBAKjBtC,QAAQC,IAAI,yCAAZ,OAAsDqC,QAAtD,IAAsDA,OAAtD,EAAsDA,EAA0BzF,aAEhF,IAAI0F,EAAoB,IACxB,IAA4B,OAAxBD,QAAwB,IAAxBA,GAAA,UAAAA,EAA0BxF,qBAA1B,eAAyC7D,WAAzC,OAAoDqJ,QAApD,IAAoDA,GAApD,UAAoDA,EAA0BjF,aAA9E,aAAoD,EAAiCpE,QACvFsJ,OAAoB9J,MACf,CAAC,IAAD,EACC+J,EAAa,mBAAOF,QAAP,IAAOA,GAAP,UAAOA,EAA0BzF,mBAAjC,aAAO,EAAuCa,UAejE,GAdA8E,EAAchJ,OAEdgJ,EAAchJ,MAAK,SAACuB,EAAGC,GACrB,OAAID,EAAIC,GAAW,YAAND,GACH,EAENA,EAAIC,GAAW,YAANA,EACJ,EAGF,KAETgF,QAAQC,IAAI,oBAAqBuC,GAG/BA,EAAcjB,SAAS,iBACvBiB,EAAcjB,SAAS,eACvBiB,EAAcjB,SAAS,YACvBiB,EAAcjB,SAAS,WAEvBgB,EAAoB,gCACf,GAA6B,IAAzBC,EAAcvJ,QAAiBuJ,EAAcjB,SAAS,WAE1D,GAA6B,IAAzBiB,EAAcvJ,OACvBsJ,EAAiB,cAAUjL,EAAOkL,EAAc,IAAI5K,iBAC/C,CACL,IADK,EACC6K,EAAQ,GADT,cAEaD,GAFb,IAEL,2BAAiC,CAAC,IAAvBE,EAAsB,QAC/BD,EAAME,KAAKrL,EAAOoL,GAAK9K,cAHpB,8BAML2K,EAAiB,cAAUE,EAAMlI,MAAM,EAAGkI,EAAMxJ,OAAS,GAAG2J,KAAK,MAAhD,gBACfH,EAAMA,EAAMxJ,OAAS,GADN,uBATjBsJ,EAAiB,cAAUjL,EAAOkL,EAAc,IAAI5K,YAAnC,kBAuBrB,OAAI2K,EAEA,gCACE,yEADF,IACgDA,UAIlD,G,yFCjDJM,KAAeC,WAAWC,MAE1B,IA2UeC,GA3UG,WAAO,IAAD,EACatG,qBAAWE,KAAtCmD,EADc,EACdA,gBACAkD,GAFc,EACG5F,MACFX,qBAAWwG,MAA1BD,YACFE,EAAO,OAAGpD,QAAH,IAAGA,OAAH,EAAGA,EAAiBxD,WAEjC,QAAgB9D,IAAZ0K,EAAuB,CACzB,IAAIhH,EAAI,OAAGgH,QAAH,IAAGA,OAAH,EAAGA,EAAShH,KAEhBiH,OAAwB3K,OACfA,IAAT0D,IACFiH,EAAwB,KAY1B,IARA,IAmBIC,EAnBAC,EAAe,EACfC,EAAgB,EACdC,EAAO9K,KAAK+K,MAAM/K,KAAKC,UAAL,OAAewK,QAAf,IAAeA,OAAf,EAAeA,EAAS9I,cAC1CqJ,EAAkB,GAElBC,EAAe,GACfC,EAAgB,GAChBC,EAAa,GACnB,MAAmBvK,OAAOC,KAAK4J,EAAQ3K,OAAvC,eAEE,IAFG,IAAMQ,EAAI,KACP8K,EAAaX,EAAQ3K,MAAMQ,GACxBwC,EAAI,EAAGA,EAAIuI,KAAKC,IAAIF,EAAW7K,OAAQ,MAAOuC,GAC9B,OAAnBsI,EAAWtI,GACb+H,IAEAD,IAON,IAAW,OAAPH,QAAO,IAAPA,OAAA,EAAAA,EAAS3K,QAASc,OAAOC,KAAP,OAAY4J,QAAZ,IAAYA,OAAZ,EAAYA,EAAS3K,OAAOS,OAAS,EAAG,OAEXH,EAAwBqK,GAA3Dc,EAF8C,EAEtD1L,OAA8B2L,EAFwB,EAE9BlL,KAC1BmL,EAAmBzK,EAA8ByJ,GAEjDiB,EAAc,GAClB,GAAID,EAAkB,CACpB,IADoB,EAChBE,EAAQ,EADQ,cAEAF,GAFA,IAEpB,2BAAsC,CAAC,IAA5BjL,EAA2B,QACpCkL,EAAYzB,KAAK,CAAE3J,KAAMkL,EAAW,EAAGG,QAAOnL,UAC9CmL,KAJkB,iCAOtB,GAAIJ,EAAgB,CAClB,IADkB,EACdI,EAAQ,EADM,cAEEJ,GAFF,IAElB,2BAAoC,CAAC,IAA1B/K,EAAyB,QAClCkL,EAAYzB,KAAK,CAAE3J,KAAMkL,EAAUG,QAAOnL,UAC1CmL,KAJgB,iCAQpBhB,EAASe,EAAY7J,MAAMwJ,KAAKO,IAAIF,EAAYnL,OAAS,GAAI,IAO7D,IAHA,IAAMsL,EAAQjL,OAAOC,KAAK4J,EAAQ3K,OAC5BgM,GAAc,IAAI/J,MAAOC,cAE/B,MAAmB6J,EAAnB,eAA0B,CAArB,IAAMvL,EAAI,KACTA,EAAOwL,EAAc,WAChBhB,EAAKxK,GA9B4C,oBAoCxCqK,GApCwC,IAoC5D,2BAA4B,CAAC,IAAlBoB,EAAiB,QACpB7G,EAAM6G,EAAMzL,KAAO,IAAMd,EAAOuM,EAAMJ,OAAOjM,WAC9B,OAAjBqM,EAAMvL,OACRwK,EAAgBf,KAAK,CAAC/E,EAAK6G,EAAMvL,QACjCyK,EAAahB,KAAK,IAAI+B,KAAMpN,EAAO0C,EAAgByK,EAAMvL,QAAQ1B,OAAOmN,KAAK,OAE7EjB,EAAgBf,KAAK,CAAC/E,EAAK,OAC3B+F,EAAahB,KAAK,QA3CsC,gCA+C5D,cAAmBrJ,OAAOC,KAAKiK,GAA/B,eAAsC,CAAjC,IAAMxK,EAAI,KACb4K,EAAcjB,KAAK,CAAC3J,EAAMwK,EAAKxK,KAC/B6K,EAAWlB,KAAK,IAAI+B,KAAMpN,EAAO0C,EAAgBwJ,EAAKxK,KAAQxB,OAAOmN,KAAK,KAG5E,eAAmBrL,OAAOC,KAAKiK,GAA/B,gBAAsC,CAAjC,IAAMxK,GAAI,MACb4K,EAAcjB,KAAK,CAAC3J,GAAMwK,EAAKxK,OAInC,IAAM4L,GAAc,GACdC,GACJ,sBAAKjE,MAAO,CAAEkE,SAAU,MAAOC,UAAW,UAA1C,UACE,gCACE,uBAAMnE,MAAO,CAAEoE,WAAY,UAA3B,UACE,cAACC,GAAA,EAAD,CAAMrE,MAAO,CAAEpJ,MAAOF,EAAOQ,aAAaN,OAASW,KAAK,WAD1D,kBACkF,IAC/E,iBAEH,uBAAMyI,MAAO,CAAEoE,WAAY,SAAUE,WAAY,GAAIC,YAAa,IAAlE,UACE,cAACF,GAAA,EAAD,CAAMrE,MAAO,CAAEpJ,MAAOF,EAAOS,WAAWP,OAASW,KAAK,WADxD,iBAC+E,aAEpE,OAAV8K,QAAU,IAAVA,OAAA,EAAAA,EAAYmC,OAAQ,KAAO,uBAC5B,uBAAMxE,MAAO,CAAEoE,WAAY,UAA3B,UACE,cAACC,GAAA,EAAD,CAAMrE,MAAO,CAAEpJ,MAAOF,EAAOU,QAAQR,OAASW,KAAK,WADrD,YAC0E,eAG5E,qBAAKyI,MAAO,CAAEkE,SAAU,OAAxB,+CAGiBrM,KAAV,OAAP0K,QAAO,IAAPA,OAAA,EAAAA,EAASrJ,MACX8K,GAAYjC,KACV,cAAC0C,GAAA,EAAD,CAEEC,QAAQ,OACR5N,OAAQ,2CAHV,SAKE,sBAAKkJ,MAAO,CAAEkE,SAAU,OAAQS,QAAS,OAAQC,WAAY,OAA7D,UACGX,GACD,cAAC,KAAD,CACEY,KAAM,CACJ,CACEA,KAAM/B,EACNgC,QAAS,CACPC,gBAAiBhC,EACjBiC,YAAajC,EACbkC,qBAAsBlC,EACtBmC,iBAAkBnC,EAClBkB,OAAQ,CACNkB,SAAS,EACTC,OAAQ,CACNC,UAAW,+BAlBrB,WA8BVlD,KAAMmD,SAASC,OAAOtB,OAAOkB,SAAU,EACnCzM,OAAOC,KAAKqK,GAAe3K,OAAS,GACtC2L,GAAYjC,KACV,cAAC0C,GAAA,EAAD,CAEEC,QAAQ,UACR5N,OAAQ,4DAHV,SAKE,sBAAKkJ,MAAO,CAAEkE,SAAU,OAAQS,QAAS,OAAQC,WAAY,OAA7D,UACGX,GACD,cAAC,KAAD,CACEY,KAAM,CACJ,CACEA,KAAM7B,EACN8B,QAAS,CACPC,gBAAiB9B,EACjB+B,YAAa/B,EACbgC,qBAAsBhC,EACtBiC,iBAAkBjC,WAdxB,cAwBV,IAKIuC,GALAC,GACF,mBAAGC,KAAK,oCAAoCC,OAAO,YAAnD,yBAKIC,GAAsB,IAAI/L,KAAK,cAqGrC,OAnGE2L,GADE,IAAI3L,KAAJ,OAAS0I,QAAT,IAASA,OAAT,EAASA,EAASrJ,KAAO0M,GAEzB,gCACE,sDACA,qCACO,IAAI/L,KAAJ,OAAS0I,QAAT,IAASA,OAAT,EAASA,EAASsD,KAAKC,qBAD9B,OACwD,IACrD,IAAIjM,KAAJ,OAAS0I,QAAT,IAASA,OAAT,EAASA,EAASrJ,KAAK4M,qBAF1B,gDAGE,+FAC+DL,GAD/D,0BAON,IAAI5L,KAAJ,OAAS0I,QAAT,IAASA,OAAT,EAASA,EAASsD,KAAOD,IACzB,IAAI/L,KAAJ,OAAS0I,QAAT,IAASA,OAAT,EAASA,EAASrJ,MAAQ0M,GAGxB,gCACE,sDACA,qCACO,IAAI/L,KAAJ,OAAS0I,QAAT,IAASA,OAAT,EAASA,EAASsD,KAAKC,qBAD9B,OACwD,IACrD,IAAIjM,KAAJ,OAAS0I,QAAT,IAASA,OAAT,EAASA,EAASrJ,KAAK4M,qBAF1B,sCAEmF,IAChFpD,EAHH,wFAIE,2FAC2D+C,GAD3D,0BAMG,IAAI5L,KAAJ,OAAS0I,QAAT,IAASA,OAAT,EAASA,EAASsD,MAAQD,SAAwC/N,KAAV,OAAP0K,QAAO,IAAPA,OAAA,EAAAA,EAASrJ,KAEjE,gCACE,sDAEA,qCACO,IAAIW,KAAJ,OAAS0I,QAAT,IAASA,OAAT,EAASA,EAASsD,KAAKC,qBAD9B,OACwD,IACrD,IAAIjM,KAAJ,OAAS0I,QAAT,IAASA,OAAT,EAASA,EAASrJ,KAAK4M,qBAF1B,sCAEmF,IAChFpD,EAHH,6DAIE,2FAC2D+C,GAD3D,uBAKF,iDACC9C,EAAgB,GACf,iEACmCA,EAAe,IAC7B,IAAlBA,EAAsB,QAAU,UAFnC,oEAGsB,IACnBQ,KAAK4C,MAAOrD,GAAgBA,EAAeC,GAAkB,KAAQ,GAJxE,QAQiB,IAAlBA,GACC,wKASJ,gCACE,2DAEkB9K,KAAV,OAAP0K,QAAO,IAAPA,OAAA,EAAAA,EAASrJ,MACR,qCACO,IAAIW,KAAJ,OAAS0I,QAAT,IAASA,OAAT,EAASA,EAASsD,KAAKC,qBAD9B,OACwD,IACrD,IAAIjM,KAAJ,OAAS0I,QAAT,IAASA,OAAT,EAASA,EAASrJ,KAAK4M,qBAF1B,sCAEmF,IAChFpD,EAHH,qEAMgB7K,KAAV,OAAP0K,QAAO,IAAPA,OAAA,EAAAA,EAASrJ,MACR,sCACQ,IAAIW,KAAJ,OAAS0I,QAAT,IAASA,OAAT,EAASA,EAASsD,KAAKC,qBAD/B,4BAC8E,IAC3EpD,EAFH,gEAKF,iDACCC,EAAgB,GACf,iEACmCA,EAAe,IAC7B,IAAlBA,EAAsB,QAAU,UAFnC,oEAGsB,IACnBQ,KAAK4C,MAAOrD,GAAgBA,EAAeC,GAAkB,KAAQ,GAJxE,QAQiB,IAAlBA,GACC,wKAUN,cAACqD,GAAA,EAAD,CACEC,cAAc,cACdlP,MAAO,6DACPmP,YACE,sBAAKlG,MAAO,CAAEwE,MAAO,OAAQ2B,UAAW3D,GAAxC,eACY3K,IAAT0D,GACC,qBACEyE,MAAO,CACLmE,UAAW,SACXiC,OAAiB,OAAV/D,QAAU,IAAVA,OAAA,EAAAA,EAAYmC,OAAQ,SAAM3M,EAAY,SAHjD,SAME,qBACEwO,IAAI,OACJrG,MAAO,CACLsG,YAAa,GACbC,aAAc,GACdC,oBAAqB,SACrBC,cAAe,OAEjBC,IAAKnL,EACLiJ,MAAM,UAIZ,qBACExE,MAAO,CACLkE,SAAU,OACVS,QAAS,OACTC,WAAY,OAJhB,SAOE,gCACE,yCAEA,qCACGrC,QADH,IACGA,OADH,EACGA,EAASzH,QADZ,WACsByH,QADtB,IACsBA,OADtB,EACsBA,EAASxH,WAAY,KACjC,OAAPwH,QAAO,IAAPA,OAAA,EAAAA,EAASvH,aAAc,4CAAQuH,QAAR,IAAQA,OAAR,EAAQA,EAASvH,WAAjB,UAEzBwK,WAKTxB,YAAaA,KAIjB,OAAO,MCpOI2C,OA3Ff,WAAgB,IAAD,EACiBhH,mBAAS,IAD1B,mBACN4B,EADM,KACGV,EADH,KAOb,OAJAf,qBAAU,WACRc,EAAWC,GACX+F,SAAS7P,MAAQ,oCAChB,IAED,cAAC8P,EAAA,EAAD,CACEC,OAAO,sCACPC,gBAAiB,2DAEjBC,iBAAkBC,IAClBC,uBAAwB,SAACjH,GAAD,cAAaA,QAAb,IAAaA,OAAb,EAAaA,EAASpF,MAC9CJ,qBAAsBA,EACtB0M,kBAAmB,CACjBC,mBAAoBC,YAA8B,IAAI,SAACC,GAAD,OAAWA,EAAM1Q,UAEzE2Q,6BAA8B,CAC5B9H,IAAK,CACH1I,MAAO,aACPyQ,eAAe,EACfC,MAAO,cAAC,EAAD,MAGXxL,YAAa,CACXa,SAAU,CAAC,eAAgB,aAAc,UAAW,UAAW,aAEjE4K,aAAcA,GACdhH,mBAAoBA,EACpBiH,iBAAkB,SAACjQ,GAAD,OAAUhB,EAAOyC,EAAUzB,IAAOX,OACpD6Q,uBAAwB,SAAClQ,GAAD,OAAUhB,EAAOyC,EAAUzB,IAAOd,OAvB5D,SAyBE,eAACiR,EAAA,EAAD,CACEC,gBAAgB,EAChBvG,QAASA,EACTwG,UAAW,cAAC,EAAD,IACXC,2BAA2B,4BAC3BC,QACE,cAACC,EAAA,EAAD,CACEC,WAAY,IACZC,OAAQ,CACNC,4BAA4B,EAE5BC,KAAM,YACNC,UAAW,CACTC,KAAM,CACJC,SAAU,cACVC,OAAQ,kBAGZC,sBAAuB,8BACvBC,wBAAyB,MAI/BC,cAAe,cAAC,GAAD,IAvBjB,UAyBE,cAACC,EAAA,EAAD,CACE/R,MAAM,iCACNgS,OAAQ,WACN,IAAIC,EAAOpC,SAASqC,cAAc,KAClCD,EAAKE,aAAa,OAAQ,UAC1B,IAAMC,EAAK,KAEPC,EACF,qFACAC,UAAU,iCAAD,OAAkCF,GAAlC,OAAuCA,EAAvC,mCACTE,UAAU,MAAD,OAAOF,GAAP,OAAYA,IAFrB,UAGGG,OAAO1J,SAAS8F,KAAK6D,QAAQ,KAAM,OAAOA,QAAQ,KAAM,QAC3DF,UACE,UAAGF,GAAH,UACKA,GADL,kCAE6BA,GAF7B,UAGKA,GAHL,OAGUA,GAHV,OAGeA,GAHf,OAGoBA,GAHpB,uCAI4BA,GAJ5B,UAKKA,GALL,UAMKA,IAETvC,SAAS4C,KAAKC,YAAYT,GAC1BA,EAAKtD,KAAO0D,EACZJ,EAAKU,WAGT,cAACC,EAAA,EAAD,IACA,cAAC,EAAD,UCpGOC,GAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCDdQ,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,GAAD,MAEF3D,SAAS4D,eAAe,SAM1BZ,O","file":"static/js/main.94644433.chunk.js","sourcesContent":["export const host = \"https://wupp-topicmaps-data.cismet.de\";\n\nexport const LOOKUP = {\n  abgebaut: {\n    color: \"#9DBCCC\",\n    signature: \"Luft_Icon_Messstation_abgebaut_farbig.svg\",\n    header: \"Messstation für NO₂ (inaktiv, abmontiert)\",\n    title: \"abmontiert\",\n    filterTitle: \"abmontierte\",\n  },\n  inaktiv: {\n    color: \"#4FAFC5\",\n    signature: \"Luft_Icon_Messstation_deaktiv_farbig.svg\",\n    header: \"Messstation für NO₂ (aktiv, aktuell Messausfall)\",\n    title: \"inaktiv\",\n    filterTitle: \"Messstationsausfälle\",\n  },\n  unauffaellig: {\n    color: \"#9ACD32\",\n    signature: \"Luft_Icon_Messstation_unauffaellig_farbig.svg\",\n    header: \"Messstation für NO₂ (aktiv, unauffällig)\",\n    title: \"unauffällig\",\n    filterTitle: \"unauffällige\",\n  },\n  auffaellig: {\n    color: \"#FFA500\",\n    signature: \"Luft_Icon_Messstation_auffaellig_farbig.svg\",\n    header: \"Messstation für NO₂ (aktiv, auffällig)\",\n    title: \"auffällig\",\n    filterTitle: \"auffällige\",\n  },\n  warnend: {\n    color: \"#E01414\",\n    signature: \"Luft_Icon_Messstation_warnend_farbig.svg\",\n    header: \"Messstation für NO₂ (aktiv, warnend)\",\n    title: \"warnend\",\n    filterTitle: \"warnende\",\n  },\n  unknown: { color: \"#eeeeee\", signature: \"Platz.svg\", header: \"Fehler\" },\n};\n\nexport const MONTHS = [\n  { name: \"Januar\", shortname: \"Jan.\" },\n  { name: \"Februar\", shortname: \"Feb.\" },\n  { name: \"März\", shortname: \"Mär.\" },\n  { name: \"April\", shortname: \"Apr.\" },\n  { name: \"Mai\", shortname: \"Mai.\" },\n  { name: \"Juni\", shortname: \"Jun.\" },\n  { name: \"Juli\", shortname: \"Jul.\" },\n  { name: \"August\", shortname: \"Aug.\" },\n  { name: \"September\", shortname: \"Sep.\" },\n  { name: \"Oktober\", shortname: \"Okt.\" },\n  { name: \"November\", shortname: \"Nov.\" },\n  { name: \"Dezember\", shortname: \"Dez.\" },\n];\n","import { addSVGToProps } from \"react-cismap/tools/svgHelper\";\n\nimport { useContext } from \"react\";\nimport { FeatureCollectionContext } from \"react-cismap/contexts/FeatureCollectionContextProvider\";\nimport { LOOKUP, MONTHS } from \"./constants\";\n\nconst hasValues = (item) => {\n  const values = item?.werte;\n  return values !== undefined && JSON.stringify(values) !== \"{}\";\n};\n\nconst getLastMeasurement = (item) => {\n  const lym = getLastYearMeasurements(item);\n\n  if (lym) {\n    const { values: lymValues, year } = lym;\n    if (lymValues.length === 13) {\n      return { value: lymValues[11], monthIndex: 11, year };\n    } else {\n      return { value: lymValues[lymValues.length - 1], monthIndex: lymValues.length - 1, year };\n    }\n  }\n};\nconst getLastYear = (item) => {\n  if (hasValues(item)) {\n    const values = item?.werte;\n    const sortedkeys = Object.keys(values).sort();\n    return sortedkeys[sortedkeys.length - 1];\n  }\n};\nconst getLastYearM1 = (item) => {\n  if (hasValues(item)) {\n    const values = item?.werte;\n    const sortedkeys = Object.keys(values).sort();\n    if (sortedkeys.length > 1) {\n      return sortedkeys[sortedkeys.length - 2];\n    }\n  }\n};\n\nexport const getLastYearMeasurements = (item) => {\n  const ly = getLastYear(item);\n  const values = item?.werte;\n  if (ly) {\n    return { values: values[ly], year: ly };\n  }\n};\nexport const getLastYearMinus1Measurements = (item) => {\n  const lym1 = getLastYearM1(item);\n  const values = item?.werte;\n  if (lym1) {\n    return values[lym1];\n  }\n};\n\nconst getActivityStatus = (item) => {\n  if (item?.bis !== undefined) {\n    return \"abgebaut\";\n  } else {\n    return \"aktiv\";\n  }\n  //todo inaktiv\n};\n\n// unauffällig 1-35 (einschließlich) µg/m³ Grün\n// auffällig 36-40 (einschließlich) µg/m³ Orange\n// warnend >40 µg/m³ Rot\nexport const getStatus = (item) => {\n  if (getActivityStatus(item) === \"aktiv\") {\n    const lym = getLastMeasurement(item)?.value;\n\n    return getStatus4Value(lym);\n  } else {\n    return getActivityStatus(item);\n  }\n};\n\nexport const getStatus4Value = (value) => {\n  if (value > 0 && value <= 35) {\n    return \"unauffaellig\";\n  } else if (value > 35 && value <= 40) {\n    return \"auffaellig\";\n  } else if (value > 40) {\n    return \"warnend\";\n  } else if (value === 9999) {\n    return \"inaktiv\";\n  } else {\n    return \"unknown\";\n  }\n};\n\n// export const getStatus4Value = (value) => {\n//   if (value > 0 && value <= 28) {\n//     return \"unauffaellig\";\n//   } else if (value > 28 && value <= 33) {\n//     return \"auffaellig\";\n//   } else if (value > 33) {\n//     return \"warnend\";\n//   } else if (value === 9999) {\n//     return \"inaktiv\";\n//   } else {\n//     return \"unknown\";\n//   }\n// };\n\nconst getSignature = (item) => {\n  const status = getStatus(item);\n  return LOOKUP[status].signature;\n};\n\nconst getAdditionalInfo = (item) => {\n  const allAvgYears = Object.keys(item?.mittelwerte);\n  allAvgYears.sort();\n  const last2Years = allAvgYears.slice(-2);\n\n  const currentYear = new Date().getFullYear();\n  const threshold = currentYear - 2;\n\n  const avgYears = last2Years.filter((year) => parseInt(year) >= threshold);\n\n  let ret = \"\";\n  avgYears.sort(function (a, b) {\n    return parseInt(b) - parseInt(a);\n  });\n  if (avgYears.length === 0) {\n    ret = \"Kein gewichteter Jahresmittelwert aus dem vergangenen Kalenderjahr vorhanden.\";\n  } else if (avgYears.length === 1) {\n    ret = \"Gewichteter Jahresmittelwert:\";\n  } else {\n    ret = \"Gewichtete Jahresmittelwerte:\";\n  }\n  for (const year of avgYears) {\n    ret = ret + \"\\n\" + item?.mittelwerte[year] + \" µg/m³ (\" + year + \")\";\n  }\n\n  return ret;\n};\n\nconst getTitle = (item) => {\n  const lm = getLastMeasurement(item);\n\n  if (item?.bis) {\n    const demontage = new Date(item?.bis);\n\n    return `Diese Messstation ist seit ${\n      MONTHS[demontage.getMonth()].name\n    } ${demontage.getFullYear()} abmontiert.`;\n  } else {\n    if (lm) {\n      if (lm.value !== 9999) {\n        return lm.value + \" µg/m³ (\" + MONTHS[lm.monthIndex].name + \" \" + lm.year + \")\";\n      } else {\n        return (\n          \"Für \" +\n          MONTHS[lm.monthIndex].name +\n          \" \" +\n          lm.year +\n          \"liefert diese Messstation keinen Messwert\"\n        );\n      }\n    } else {\n      return \"Diese Messstation ist abmontiert\";\n    }\n  }\n};\n\nconst convertItemToFeature = async (itemIn) => {\n  //   console.log(\"itemIn\", itemIn);\n\n  let item = await addSVGToProps(itemIn, (i) => \"luft/\" + getSignature(i));\n  item.status = getStatus(item);\n  const text =\n    item?.strasse +\n    \" \" +\n    (item?.hausnummer || \"\") +\n    (item?.zusatzinfo !== undefined ? \" (\" + item?.zusatzinfo + \")\" : \"\");\n\n  const type = \"Feature\";\n  const selected = false;\n  const geometry = item?.geojson;\n  item.color = LOOKUP[item.status].color;\n  const info = {\n    header: LOOKUP[item.status].header,\n    title: getTitle(item),\n    additionalInfo: getAdditionalInfo(item),\n    subtitle: (\n      <span>\n        {item?.strasse} {item?.hausnummer} {item?.zusatzinfo && <span>({item?.zusatzinfo})</span>}\n      </span>\n    ),\n  };\n  item.info = info;\n  if (item?.bild) {\n    item.foto = \"https://www.wuppertal.de/geoportal/luftmessstationen/fotos/\" + item.bild;\n  }\n\n  return {\n    text,\n    type,\n    selected,\n    geometry,\n    crs: {\n      type: \"name\",\n      properties: {\n        name: \"urn:ogc:def:crs:EPSG::25832\",\n      },\n    },\n    properties: item,\n  };\n};\nexport default convertItemToFeature;\n","import { useContext } from \"react\";\nimport {\n  FeatureCollectionContext,\n  FeatureCollectionDispatchContext,\n} from \"react-cismap/contexts/FeatureCollectionContextProvider\";\nimport { UIDispatchContext } from \"react-cismap/contexts/UIContextProvider\";\nimport { getSimpleHelpForTM } from \"react-cismap/tools/uiHelper\";\nimport { Link } from \"react-scroll\";\nimport ModalApplicationMenu from \"react-cismap/topicmaps/menu/ModalApplicationMenu\";\nimport Section from \"react-cismap/topicmaps/menu/Section\";\nimport FilterPanel from \"react-cismap/topicmaps/menu/FilterPanel\";\nimport DefaultSettingsPanel from \"react-cismap/topicmaps/menu/DefaultSettingsPanel\";\nimport ConfigurableDocBlocks from \"react-cismap/topicmaps/ConfigurableDocBlocks\";\nimport { LOOKUP } from \"./helper/constants\";\nconst MyMenu = () => {\n  const { setAppMenuActiveMenuSection } = useContext(UIDispatchContext);\n  const { filterState, filterMode, filteredItems, shownFeatures } = useContext(\n    FeatureCollectionContext\n  );\n  const { setFilterState, setFilterMode } = useContext(FeatureCollectionDispatchContext);\n\n  const { items } = useContext(FeatureCollectionContext);\n\n  const kategorien = [];\n  const katValues = [];\n  const themen = [];\n  const themenValues = [];\n  const topicMapTitle = \"Luftmessstationskarte Wuppertal\";\n\n  const getFilterHeader = () => {\n    const count = filteredItems?.length || 0;\n\n    let term;\n    if (count === 1) {\n      term = \"Standort\";\n    } else {\n      term = \"Standorte\";\n    }\n\n    return `Messstationen der Luftqualität (${count} ${term} gefunden, davon ${\n      shownFeatures?.length || \"0\"\n    } in der Karte)`;\n  };\n\n  const filterConfiguration = {\n    mode: \"list\", // list or tabs\n    resetedFilter: {\n      stations: [\"unauffaellig\", \"auffaellig\", \"warnend\", \"inaktiv\", \"abgebaut\"],\n    },\n    filterMode: \"gibtnureinen\",\n    filters: [\n      {\n        title: \"aktive Messstationen\",\n        key: \"stations\",\n        type: \"checkBoxes\",\n        values: [\n          {\n            keys: [\"unauffaellig\", \"auffaellig\", \"warnend\", \"inaktiv\"],\n            title: \"alle aktiven Stationen\",\n          },\n          {\n            key: \"unauffaellig\",\n            indent: 30,\n            title: \"unauffällige Stationen\",\n            color: LOOKUP.unauffaellig.color,\n            icon: \"square\",\n            iconPos: \"pre\",\n          },\n          {\n            key: \"auffaellig\",\n            indent: 30,\n            title: \"auffällige Stationen\",\n            color: LOOKUP.auffaellig.color,\n            icon: \"square\",\n            iconPos: \"pre\",\n          },\n          {\n            key: \"warnend\",\n            indent: 30,\n            title: \"warnende Stationen\",\n            color: LOOKUP.warnend.color,\n            icon: \"square\",\n            iconPos: \"pre\",\n          },\n          {\n            key: \"inaktiv\",\n            indent: 30,\n            title: \"Stationen mit Messausfall\",\n            color: LOOKUP.inaktiv.color,\n            icon: \"square\",\n            iconPos: \"pre\",\n          },\n        ],\n        setAll: () => {\n          setFilterState({ ...filterState, themen });\n        },\n        setNone: () => {\n          setFilterState({ ...filterState, themen: [] });\n        },\n        colorizer: (item, selected) => (selected ? item.color : \"#eeeeee\"),\n      },\n      {\n        title: \"inaktive Messstationen\",\n        key: \"stations\",\n        type: \"checkBoxes\",\n        values: [\n          {\n            key: \"abgebaut\",\n            title: \"abmontierte Stationen\",\n            color: LOOKUP.abgebaut.color,\n            icon: \"square\",\n            iconPos: \"pre\",\n          },\n        ],\n        setAll: () => {\n          setFilterState({ ...filterState, kategorien });\n        },\n        setNone: () => {\n          setFilterState({ ...filterState, kategorien: [] });\n        },\n      },\n    ],\n  };\n  const simpleHelp = {\n    content: `Die Stadt Wuppertal führt seit vielen Jahren Messungen und Kartierungen durch,\num Aufschlüsse über die Luftbelastungssituation zu erhalten. Diese Erkenntnisse werden \nfür Maßnahmen zur Luftreinhaltung und die Stadtentwicklung genutzt. Einer der derzeit \nam meisten diskutierte Luftschadstoff ist Stickstoffdioxid (NO₂ ). Dieser wird als \nReizgas mit stechend-stickigem Geruch bereits in geringen Konzentrationen wahrgenommen. \nDie Inhalation ist für den Menschen der einzig relevante Aufnahmeweg. \n   \nDie europäische Union hat für ihre Mitgliedsstaaten mit mehreren Luftqualitätsrichtlinien\nverbindliche Luftqualitätsziele zur Vermeidung oder Verringerung schädlicher Auswirkungen\nauf die menschliche Gesundheit und die Umwelt festgelegt. Danach wird die Luftqualität \nin den Staaten der EU nach einheitlichen Methoden und Kriterien beurteilt. In der \nBundesrepublik Deutschland wurden diese Richtlinien durch Novellierung des \nBundes-Immissions­schutzgesetzes (BImSchG) sowie durch die Einführung der 39. Verordnung \nzum BImSchG (39. BImSchV) in deutsches Recht umgesetzt. Für Stickstoffdioxid (NO₂ ) gilt \nseit dem Jahr 2010 ein Jahresmittelwert für NO₂  von 40 µg pro Kubikmeter Luft. Die \nMessungen von Stickstoffdioxid (NO₂ ) werden in Wuppertal mit sogenannten Passivsammlern \ndurchgeführt und nahezu monatlich abgelesen. \n  \nDie Luftmessstationskarte zeigt die Positionen dieser Passivsammler im Wuppertaler Stadtgebiet,\nwelche in den vergangenen zehn Jahren Messwerte lieferten. Die farbigen Signaturen in der\nKarte beziehen sich dabei auf den zuletzt verfügbaren monatlichen NO₂ -Messwert: unauffällig \ngrün (≦ 35 mg/m³), auffällig gelb (> 35 µg/m³) und warnend rot (> 40 µg/m³). Die Signaturen \nfür Passivsammler, welche bei der letzten monatlichen Ablesung keinen Messwert geliefert \nhaben, sind türkis eingefärbt (temporärer Ausfall). Wenn eine Messstation in den letzten \nzehn Jahren abgebaut wurde und damit keine weiteren NO₂ -Messwerte liefert, liegt eine \nblaugraue Signatur vor. Die Daten zu den Messstationen und Messwerten seit dem Jahr \n2006 sind im Open-Data-Angebot der Stadt Wuppertal als Datensatz Luftmessstationen \n[[Link zum Open-Data-Portal](https://offenedaten-wuppertal.de/)] verfügbar.`,\n  };\n  return (\n    <ModalApplicationMenu\n      menuIcon={\"bars\"}\n      menuTitle={\"Filter, Einstellungen und Kompaktanleitung\"}\n      menuIntroduction={\n        <span>\n          Benutzen Sie die Auswahlmöglichkeiten unter{\" \"}\n          <Link\n            className='useAClassNameToRenderProperLink'\n            to='filter'\n            containerId='myMenu'\n            smooth={true}\n            delay={100}\n            onClick={() => setAppMenuActiveMenuSection(\"filter\")}\n          >\n            Filter\n          </Link>\n          , um die in der Karte angezeigten vorbildlichen Luftmessstationen für Stickstoffdioxid\n          (NO₂) auf die für Sie relevanten Stationen zu beschränken. Über{\" \"}\n          <Link\n            className='useAClassNameToRenderProperLink'\n            to='settings'\n            containerId='myMenu'\n            smooth={true}\n            delay={100}\n            onClick={() => setAppMenuActiveMenuSection(\"settings\")}\n          >\n            Einstellungen\n          </Link>{\" \"}\n          können Sie die Darstellung der Hintergrundkarte und der Stationen an Ihre Vorlieben\n          anpassen. Wählen Sie die{\" \"}\n          <Link\n            className='useAClassNameToRenderProperLink'\n            to='help'\n            containerId='myMenu'\n            smooth={true}\n            delay={100}\n            onClick={() => setAppMenuActiveMenuSection(\"help\")}\n          >\n            Kompaktanleitung\n          </Link>{\" \"}\n          für detailliertere Bedienungsinformationen.\n        </span>\n      }\n      menuSections={[\n        <Section\n          key='filter'\n          sectionKey='filter'\n          sectionTitle={getFilterHeader()}\n          sectionBsStyle='primary'\n          sectionContent={<FilterPanel filterConfiguration={filterConfiguration} />}\n        />,\n        <DefaultSettingsPanel\n          previewMapPosition='lat=51.2607860760692&lng=7.164304562911684&title&zoom=9'\n          previewMapClusteringOptions={undefined}\n          key='settings'\n        />,\n        <Section\n          key='help'\n          sectionKey='help'\n          sectionTitle='Kompaktanleitung'\n          sectionBsStyle='default'\n          sectionContent={\n            <ConfigurableDocBlocks configs={getSimpleHelpForTM(topicMapTitle, simpleHelp)} />\n          }\n        />,\n      ]}\n    />\n  );\n};\nexport default MyMenu;\n","import { useContext } from \"react\";\nimport { FeatureCollectionContext } from \"react-cismap/contexts/FeatureCollectionContextProvider\";\n\nconst LogSelection = () => {\n  const { selectedFeature } = useContext(FeatureCollectionContext);\n  console.log(\"selectedFeature.properties\", selectedFeature?.properties);\n\n  return <div></div>;\n};\n\nexport default LogSelection;\n","import { FeatureCollectionDisplayWithTooltipLabels } from \"react-cismap\";\nimport { useEffect, useContext, useState } from \"react\";\nimport { TopicMapContext } from \"react-cismap/contexts/TopicMapContextProvider\";\nimport { md5FetchJSON } from \"react-cismap/tools/fetching\";\nimport { host } from \"./helper/constants\";\n\nconst getUWZ = async (setUWZ) => {\n  const uwz = await md5FetchJSON(\"MapData\", host + \"/data/umweltzonen.json\");\n  setUWZ(uwz);\n};\n\nconst UWZ = () => {\n  const [uwz, setUWZ] = useState([]);\n  const { location } = useContext(TopicMapContext);\n  useEffect(() => {\n    getUWZ(setUWZ);\n  }, []);\n\n  return (\n    <FeatureCollectionDisplayWithTooltipLabels\n      key={\"ds\"}\n      featureCollection={uwz}\n      style={(feature) => {\n        const style = {\n          color: \"#155317\",\n          weight: 3,\n          opacity: 0.5,\n          fillColor: \"#155317\",\n          fillOpacity: 0.15,\n        };\n        return style;\n      }}\n      labeler={(feature) => {\n        const currentZoom = location?.zoom || 8;\n        if (currentZoom > 7) {\n          return (\n            <h3\n              style={{\n                color: \"#155317\",\n                opacity: 0.7,\n                textShadow:\n                  \"1px 1px 0px  #000000,-1px 1px 0px  #000000, 1px -1px 0px  #000000, -1px -1px 0px  #000000, 2px 2px 15px #000000\",\n              }}\n            >\n              Umweltzone\n            </h3>\n          );\n        }\n      }}\n      featureClickHandler={() => {}}\n    />\n  );\n};\nexport default UWZ;\n","import { getStatus } from \"./convertItemToFeature\";\n\nconst itemFilterFunction = ({ filterState }) => {\n  return (item) => {\n    return filterState?.stations?.includes(getStatus(item));\n  };\n};\nexport default itemFilterFunction;\n","import { md5FetchText } from \"react-cismap/tools/fetching\";\nimport { getGazDataForTopicIds } from \"react-cismap/tools/gazetteerHelper\";\nimport { host } from \"./constants\";\n\nexport const getGazData = async (setGazData) => {\n  const prefix = \"GazData\";\n  const sources = {};\n\n  sources.adressen = await md5FetchText(prefix, host + \"/data/adressen.json\");\n  sources.bezirke = await md5FetchText(prefix, host + \"/data/bezirke.json\");\n  sources.quartiere = await md5FetchText(prefix, host + \"/data/quartiere.json\");\n  sources.pois = await md5FetchText(prefix, host + \"/data/pois.json\");\n  sources.kitas = await md5FetchText(prefix, host + \"/data/kitas.json\");\n  sources.no2 = await md5FetchText(prefix, host + \"/data/no2.json\");\n\n  const gazData = getGazDataForTopicIds(sources, [\n    \"no2\",\n    \"pois\",\n    \"kitas\",\n    \"bezirke\",\n    \"quartiere\",\n    \"adressen\",\n  ]);\n\n  setGazData(gazData);\n};\n","import { LOOKUP } from \"./constants\";\nconst factory = ({ featureCollectionContext }) => {\n  const getThemaById = (id) => {\n    const result = featureCollectionContext?.items?.find((item) => item?.thema?.id === id);\n    return result?.thema?.name;\n  };\n  console.log(\"featureCollectionContext?.filterState?\", featureCollectionContext?.filterState);\n\n  let filterDescription = \"?\";\n  if (featureCollectionContext?.filteredItems?.length === featureCollectionContext?.items?.length) {\n    filterDescription = undefined;\n  } else {\n    const stationsArten = [...featureCollectionContext?.filterState?.stations];\n    stationsArten.sort();\n\n    stationsArten.sort((a, b) => {\n      if (a < b || a === \"inaktiv\") {\n        return -1;\n      }\n      if (a > b || b === \"inaktiv\") {\n        return 1;\n      }\n      // a muss gleich b sein\n      return 0;\n    });\n    console.log(\"yyy stationsArten\", stationsArten);\n\n    if (\n      stationsArten.includes(\"unauffaellig\") &&\n      stationsArten.includes(\"auffaellig\") &&\n      stationsArten.includes(\"warnend\") &&\n      stationsArten.includes(\"inaktiv\")\n    ) {\n      filterDescription = \"nur aktive Messstationen\";\n    } else if (stationsArten.length === 1 && !stationsArten.includes(\"inaktiv\")) {\n      filterDescription = `nur ${LOOKUP[stationsArten[0]].filterTitle} Messstationen`;\n    } else if (stationsArten.length === 1) {\n      filterDescription = `nur ${LOOKUP[stationsArten[0]].filterTitle}`;\n    } else {\n      const parts = [];\n      for (const art of stationsArten) {\n        parts.push(LOOKUP[art].filterTitle);\n      }\n\n      filterDescription = `nur ${parts.slice(0, parts.length - 1).join(\", \")} und ${\n        parts[parts.length - 1]\n      } Messstationen`;\n    }\n  }\n\n  // if (featureCollectionContext?.filteredItems?.length === 0) {\n  //   return (\n  //     <div>\n  //       <b>Keine Luftmessstationen gefunden!</b> Bitte überprüfen Sie Ihre Filtereinstellungen.\n  //     </div>\n  //   );\n  // }\n\n  if (filterDescription) {\n    return (\n      <div>\n        <b>Meine Messstationen der Luftqualität:</b> {filterDescription}\n      </div>\n    );\n  } else {\n    return undefined;\n  }\n};\n\nexport default factory;\n","import React, { useContext, useRef } from \"react\";\nimport { FeatureCollectionContext } from \"react-cismap/contexts/FeatureCollectionContextProvider\";\nimport SecondaryInfoPanelSection from \"react-cismap/topicmaps/SecondaryInfoPanelSection\";\nimport SecondaryInfo from \"react-cismap/topicmaps/SecondaryInfo\";\nimport {\n  getLastYearMeasurements,\n  getLastYearMinus1Measurements,\n  getStatus4Value,\n} from \"./helper/convertItemToFeature\";\nimport Chart from \"chart.js\";\nimport ReactChartkick, { ColumnChart } from \"react-chartkick\";\nimport { LOOKUP, MONTHS } from \"./helper/constants\";\nimport Color from \"color\";\nimport Icon from \"react-cismap/commons/Icon\";\nimport { ResponsiveTopicMapContext } from \"react-cismap/contexts/ResponsiveTopicMapContextProvider\";\n\nReactChartkick.addAdapter(Chart);\n\nconst InfoPanel = () => {\n  const { selectedFeature, items } = useContext(FeatureCollectionContext);\n  const { windowSize } = useContext(ResponsiveTopicMapContext);\n  const station = selectedFeature?.properties;\n\n  if (station !== undefined) {\n    let foto = station?.foto;\n\n    let minHeight4MainSextion = undefined;\n    if (foto !== undefined) {\n      minHeight4MainSextion = 250;\n    }\n\n    // --- value and outage counter and avg of the last 10 years\n    let valueCounter = 0;\n    let outageCounter = 0;\n    const avgs = JSON.parse(JSON.stringify(station?.mittelwerte));\n    const last12ChartData = [];\n\n    const last12Colors = [];\n    const avgsChartData = [];\n    const avgsColors = [];\n    for (const year of Object.keys(station.werte)) {\n      const yearValues = station.werte[year];\n      for (let i = 0; i < Math.min(yearValues.length, 12); ++i) {\n        if (yearValues[i] === -9999) {\n          outageCounter++;\n        } else {\n          valueCounter++;\n        }\n      }\n    }\n\n    let last12;\n\n    if (station?.werte && Object.keys(station?.werte).length > 0) {\n      // --- measurements of the last 12 months\n      let { values: lastYearValues, year: lastYear } = getLastYearMeasurements(station);\n      let lastYearM1Values = getLastYearMinus1Measurements(station);\n\n      let twoYearVals = [];\n      if (lastYearM1Values) {\n        let index = 0;\n        for (const value of lastYearM1Values) {\n          twoYearVals.push({ year: lastYear - 1, index, value });\n          index++;\n        }\n      }\n      if (lastYearValues) {\n        let index = 0;\n        for (const value of lastYearValues) {\n          twoYearVals.push({ year: lastYear, index, value });\n          index++;\n        }\n      }\n\n      last12 = twoYearVals.slice(Math.max(twoYearVals.length - 12, 0));\n\n      // --- avg of the last 10 years means delete the first n values\n      //     where n=count of keys in werte-10\n      const years = Object.keys(station.werte);\n      const currentYear = new Date().getFullYear();\n\n      for (const year of years) {\n        if (year < currentYear - 11) {\n          delete avgs[year];\n        }\n      }\n\n      // ---create the chart objects\n\n      for (const entry of last12) {\n        const key = entry.year + \" \" + MONTHS[entry.index].shortname;\n        if (entry.value !== -9999) {\n          last12ChartData.push([key, entry.value]);\n          last12Colors.push(new Color(LOOKUP[getStatus4Value(entry.value)].color).fade(0.5));\n        } else {\n          last12ChartData.push([key, null]);\n          last12Colors.push(null);\n        }\n      }\n\n      for (const year of Object.keys(avgs)) {\n        avgsChartData.push([year, avgs[year]]);\n        avgsColors.push(new Color(LOOKUP[getStatus4Value(avgs[year])].color).fade(0.5));\n      }\n\n      for (const year of Object.keys(avgs)) {\n        avgsChartData.push([year, avgs[year]]);\n      }\n    }\n\n    const subSections = [];\n    const legend = (\n      <div style={{ fontSize: \"90%\", textAlign: \"center\" }}>\n        <div>\n          <span style={{ whiteSpace: \"nowrap\" }}>\n            <Icon style={{ color: LOOKUP.unauffaellig.color }} name='square' /> unauffällig{\" \"}\n            {\"(≦ 35)\"}\n          </span>\n          <span style={{ whiteSpace: \"nowrap\", marginLeft: 10, marginRight: 10 }}>\n            <Icon style={{ color: LOOKUP.auffaellig.color }} name='square' /> auffällig {\"(> 35)\"}\n          </span>\n          {windowSize?.width < 463 && <br />}\n          <span style={{ whiteSpace: \"nowrap\" }}>\n            <Icon style={{ color: LOOKUP.warnend.color }} name='square' /> warnend {\"(> 40)\"}\n          </span>\n        </div>\n        <div style={{ fontSize: \"80%\" }}> Messwerte in µg/m³</div>\n      </div>\n    );\n    if (station?.bis === undefined) {\n      subSections.push(\n        <SecondaryInfoPanelSection\n          key='last12'\n          bsStyle='info'\n          header={\"NO₂-Messwerte der letzten 12 Monate\"}\n        >\n          <div style={{ fontSize: \"115%\", padding: \"10px\", paddingTop: \"0px\" }}>\n            {legend}\n            <ColumnChart\n              data={[\n                {\n                  data: last12ChartData,\n                  library: {\n                    backgroundColor: last12Colors,\n                    borderColor: last12Colors,\n                    hoverBackgroundColor: last12Colors,\n                    hoverBorderColor: last12Colors,\n                    legend: {\n                      display: false,\n                      labels: {\n                        fontColor: \"rgb(255, 99, 132)\",\n                      },\n                    },\n                  },\n                },\n              ]}\n            />\n          </div>\n        </SecondaryInfoPanelSection>\n      );\n    }\n\n    Chart.defaults.global.legend.display = false;\n    if (Object.keys(avgsChartData).length > 0) {\n      subSections.push(\n        <SecondaryInfoPanelSection\n          key='average10'\n          bsStyle='warning'\n          header={\"NO₂-Jahresmittelwerte der letzten zehn Kalenderjahre\"}\n        >\n          <div style={{ fontSize: \"115%\", padding: \"10px\", paddingTop: \"0px\" }}>\n            {legend}\n            <ColumnChart\n              data={[\n                {\n                  data: avgsChartData,\n                  library: {\n                    backgroundColor: avgsColors,\n                    borderColor: avgsColors,\n                    hoverBackgroundColor: avgsColors,\n                    hoverBorderColor: avgsColors,\n                  },\n                },\n              ]}\n            />\n            {/* <pre>{JSON.stringify(avgs, null, 2)}</pre> */}\n          </div>\n        </SecondaryInfoPanelSection>\n      );\n    }\n    let opendataLink = (\n      <a href='https://offenedaten-wuppertal.de/' target='_opendata'>\n        diesem Link\n      </a>\n    );\n    let stationsaktivitaet;\n    const twothousandandeight = new Date(\"2008-01-01\");\n    if (new Date(station?.bis) < twothousandandeight) {\n      stationsaktivitaet = (\n        <div>\n          <b>Stationsaktivität:</b>\n          <p>\n            Von {new Date(station?.von).toLocaleDateString()} bis{\" \"}\n            {new Date(station?.bis).toLocaleDateString()} generierte diese Station NO₂-Messwerte.\n            <div>\n              Die Daten dieser Station sind nur im Open-Data-Portal unter {opendataLink} verfügbar.\n            </div>\n          </p>\n        </div>\n      );\n    } else if (\n      new Date(station?.von) < twothousandandeight &&\n      new Date(station?.bis) >= twothousandandeight\n    ) {\n      stationsaktivitaet = (\n        <div>\n          <b>Stationsaktivität:</b>\n          <p>\n            Von {new Date(station?.von).toLocaleDateString()} bis{\" \"}\n            {new Date(station?.bis).toLocaleDateString()} generierte diese Station insgesamt{\" \"}\n            {valueCounter} NO₂-Messwerte (Ausfälle und Messwerte vor 1.1.2008 nicht berücksichtigt).\n            <div>\n              Die Daten dieser Station sind im Open-Data-Portal unter {opendataLink} verfügbar.\n            </div>\n          </p>\n        </div>\n      );\n    } else if (new Date(station?.von) >= twothousandandeight && station?.bis !== undefined) {\n      stationsaktivitaet = (\n        <div>\n          <b>Stationsaktivität:</b>\n\n          <p>\n            Von {new Date(station?.von).toLocaleDateString()} bis{\" \"}\n            {new Date(station?.bis).toLocaleDateString()} generierte diese Station insgesamt{\" \"}\n            {valueCounter} NO₂-Messwerte (Ausfälle nicht berücksichtigt).\n            <div>\n              Die Daten dieser Station sind im Open-Data-Portal unter {opendataLink} verfügbar.\n            </div>\n          </p>\n\n          <b>Messausfälle:</b>\n          {outageCounter > 0 && (\n            <p>\n              Diese Messstation generierte an {outageCounter}{\" \"}\n              {outageCounter === 1 ? \"Monat\" : \"Monaten\"} einen Messausfall. Damit besitzt sie eine\n              Zuverlässigkeit von{\" \"}\n              {Math.round((valueCounter / (valueCounter + outageCounter)) * 1000) / 10}\n              %.\n            </p>\n          )}\n          {outageCounter === 0 && (\n            <p>\n              Diese Messstation lieferte in jedem Monat der Stationsaktivität einen NO₂-Messwert.\n              Damit liegt bisher kein Messausfall vor.\n            </p>\n          )}\n        </div>\n      );\n    } else {\n      stationsaktivitaet = (\n        <div>\n          <b>Stationsaktivität:</b>\n\n          {station?.bis !== undefined && (\n            <p>\n              Von {new Date(station?.von).toLocaleDateString()} bis{\" \"}\n              {new Date(station?.bis).toLocaleDateString()} generierte diese Station insgesamt{\" \"}\n              {valueCounter} NO₂-Messwerte (Ausfälle nicht berücksichtigt).\n            </p>\n          )}\n          {station?.bis === undefined && (\n            <p>\n              Seit {new Date(station?.von).toLocaleDateString()} generierte diese Station{\" \"}\n              {valueCounter} NO₂-Messwerte (Ausfälle nicht berücksichtigt).\n            </p>\n          )}\n          <b>Messausfälle:</b>\n          {outageCounter > 0 && (\n            <p>\n              Diese Messstation generierte an {outageCounter}{\" \"}\n              {outageCounter === 1 ? \"Monat\" : \"Monaten\"} einen Messausfall. Damit besitzt sie eine\n              Zuverlässigkeit von{\" \"}\n              {Math.round((valueCounter / (valueCounter + outageCounter)) * 1000) / 10}\n              %.\n            </p>\n          )}\n          {outageCounter === 0 && (\n            <p>\n              Diese Messstation lieferte in jedem Monat der Stationsaktivität einen NO₂-Messwert.\n              Damit liegt bisher kein Messausfall vor.\n            </p>\n          )}\n        </div>\n      );\n    }\n\n    return (\n      <SecondaryInfo\n        titleIconName='info-circle'\n        title={\"Datenblatt: Messstation für Stickstoffdioxid (NO₂)\"}\n        mainSection={\n          <div style={{ width: \"100%\", minHeight: minHeight4MainSextion }}>\n            {foto !== undefined && (\n              <div\n                style={{\n                  textAlign: \"center\",\n                  float: windowSize?.width < 500 ? undefined : \"right\",\n                }}\n              >\n                <img\n                  alt='Bild'\n                  style={{\n                    paddingLeft: 10,\n                    paddingRight: 10,\n                    horizontalAlignment: \"center\",\n                    paddingBottom: \"5px\",\n                  }}\n                  src={foto}\n                  width='250'\n                />\n              </div>\n            )}\n            <div\n              style={{\n                fontSize: \"115%\",\n                padding: \"10px\",\n                paddingTop: \"0px\",\n              }}\n            >\n              <div>\n                <b>Adresse:</b>\n\n                <p>\n                  {station?.strasse} {station?.hausnummer}{\" \"}\n                  {station?.zusatzinfo && <span>({station?.zusatzinfo})</span>}\n                </p>\n                {stationsaktivitaet}\n              </div>\n            </div>\n          </div>\n        }\n        subSections={subSections}\n      />\n    );\n  } else {\n    return null;\n  }\n};\nexport default InfoPanel;\n","import { useEffect } from \"react\";\n\nimport \"./App.css\";\nimport { useState } from \"react\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"leaflet/dist/leaflet.css\";\nimport \"react-bootstrap-typeahead/css/Typeahead.css\";\nimport \"react-cismap/topicMaps.css\";\nimport TopicMapContextProvider from \"react-cismap/contexts/TopicMapContextProvider\";\nimport TopicMapComponent from \"react-cismap/topicmaps/TopicMapComponent\";\nimport FeatureCollection from \"react-cismap/FeatureCollection\";\nimport GenericInfoBoxFromFeature from \"react-cismap/topicmaps/GenericInfoBoxFromFeature\";\n\nimport getGTMFeatureStyler from \"react-cismap/topicmaps/generic/GTMStyler\";\nimport ContactButton from \"react-cismap/ContactButton\";\nimport convertItemToFeature, { getStatus } from \"./helper/convertItemToFeature\";\n\nimport { getClusterIconCreatorFunction } from \"react-cismap/tools/uiHelper\";\nimport MyMenu from \"./Menu\";\nimport LogSelection from \"./helper/LogSelectedFeature\";\nimport UWZ from \"./Umweltzonenlayer\";\nimport itemFilterFunction from \"./helper/filterFunction\";\nimport { LOOKUP } from \"./helper/constants\";\nimport { getGazData } from \"./helper/getGazData\";\nimport titleFactory from \"./helper/titleFactory\";\nimport InfoPanel from \"./SecondaryInfo\";\n\nfunction App() {\n  const [gazData, setGazData] = useState([]);\n\n  useEffect(() => {\n    getGazData(setGazData);\n    document.title = \"Luftmessstationskarte Wuppertal\";\n  }, []);\n  return (\n    <TopicMapContextProvider\n      appKey='LuftmessstationenWuppertal.TopicMap'\n      featureItemsURL={\"https://wupp-topicmaps-data.cismet.de/data/no2.data.json\"}\n      // featureItemsURL={\"/data/no2.data.json\"} //for dev purpose only\n      getFeatureStyler={getGTMFeatureStyler}\n      featureTooltipFunction={(feature) => feature?.text}\n      convertItemToFeature={convertItemToFeature}\n      clusteringOptions={{\n        iconCreateFunction: getClusterIconCreatorFunction(30, (props) => props.color),\n      }}\n      additionalLayerConfiguration={{\n        uwz: {\n          title: \"Umweltzone\",\n          initialActive: true,\n          layer: <UWZ />,\n        },\n      }}\n      filterState={{\n        stations: [\"unauffaellig\", \"auffaellig\", \"warnend\", \"inaktiv\", \"abgebaut\"],\n      }}\n      titleFactory={titleFactory}\n      itemFilterFunction={itemFilterFunction}\n      classKeyFunction={(item) => LOOKUP[getStatus(item)].title}\n      getColorFromProperties={(item) => LOOKUP[getStatus(item)].color}\n    >\n      <TopicMapComponent\n        locatorControl={true}\n        gazData={gazData}\n        modalMenu={<MyMenu />}\n        gazetteerSearchPlaceholder='Stadtteil | Adresse | POI'\n        infoBox={\n          <GenericInfoBoxFromFeature\n            pixelwidth={350}\n            config={{\n              displaySecondaryInfoAction: true,\n\n              city: \"Wuppertal\",\n              navigator: {\n                noun: {\n                  singular: \"Messstation\",\n                  plural: \"Messstationen\",\n                },\n              },\n              noCurrentFeatureTitle: \"Keine Messtationen gefunden\",\n              noCurrentFeatureContent: \"\",\n            }}\n          />\n        }\n        secondaryInfo={<InfoPanel />}\n      >\n        <ContactButton\n          title='Rückfrage zu den Messwerten'\n          action={() => {\n            let link = document.createElement(\"a\");\n            link.setAttribute(\"type\", \"hidden\");\n            const br = \"\\n\";\n\n            let mailToHref =\n              \"mailto:luftreinhaltung@stadt.wuppertal.de?subject=Rückfrage zu Messwerten&body=\" +\n              encodeURI(`Sehr geehrte Damen und Herren,${br}${br} zu der Luftmessstationskarte `) +\n              encodeURI(`auf${br}${br}`) +\n              `${window.location.href.replace(/&/g, \"%26\").replace(/#/g, \"%23\")}` +\n              encodeURI(\n                `${br}` +\n                  `${br}` +\n                  `habe ich folgende Frage:${br}` +\n                  `${br}${br}${br}${br}` +\n                  `Mit freundlichen Grüßen${br}` +\n                  `${br}` +\n                  `${br}`\n              );\n            document.body.appendChild(link);\n            link.href = mailToHref;\n            link.click();\n          }}\n        />\n        <FeatureCollection></FeatureCollection>\n        <LogSelection />\n      </TopicMapComponent>\n    </TopicMapContextProvider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}