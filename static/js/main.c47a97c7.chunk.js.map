{"version":3,"sources":["helper/constants.js","helper/convertItemToFeature.js","Menu.js","helper/LogSelectedFeature.js","Umweltzonenlayer.js","helper/filterFunction.js","helper/getGazData.js","helper/titleFactory.js","SecondaryInfo.js","App.js","reportWebVitals.js","index.js"],"names":["host","LOOKUP","abgebaut","color","signature","header","title","filterTitle","inaktiv","unauffaellig","auffaellig","warnend","unknown","MONTHS","name","shortname","hasValues","item","values","werte","undefined","JSON","stringify","getLastMeasurement","lym","getLastYearMeasurements","lymValues","year","length","value","monthIndex","getLastYear","sortedkeys","Object","keys","sort","getLastYearM1","ly","getActivityStatus","bis","getStatus","getStatus4Value","getSignature","status","getAdditionalInfo","lastYear","lastYearM1","lastYearAverage","mittelwerte","lastYearM1Average","ret","getTitle","lm","demontage","Date","getMonth","getFullYear","convertItemToFeature","itemIn","a","addSVGToProps","i","text","strasse","hausnummer","zusatzinfo","geometry","geojson","info","additionalInfo","subtitle","bild","foto","type","selected","crs","properties","MyMenu","setAppMenuActiveMenuSection","useContext","UIDispatchContext","FeatureCollectionContext","filterState","filteredItems","filterMode","shownFeatures","FeatureCollectionDispatchContext","setFilterState","kategorien","setFilterMode","items","themen","filterConfiguration","mode","resetedFilter","stations","filters","key","indent","icon","iconPos","setAll","setNone","colorizer","ModalApplicationMenu","menuIcon","menuTitle","menuIntroduction","className","to","containerId","smooth","delay","onClick","menuSections","Section","sectionKey","sectionTitle","term","count","getFilterHeader","sectionBsStyle","sectionContent","FilterPanel","DefaultSettingsPanel","previewMapPosition","previewMapClusteringOptions","ConfigurableDocBlocks","configs","getSimpleHelpForTM","LogSelection","selectedFeature","console","log","getUWZ","setUWZ","md5FetchJSON","uwz","UWZ","useState","location","TopicMapContext","useEffect","featureCollection","style","feature","weight","opacity","fillColor","fillOpacity","labeler","zoom","textShadow","featureClickHandler","itemFilterFunction","includes","getGazData","setGazData","prefix","sources","md5FetchText","adressen","bezirke","quartiere","pois","kitas","no2","gazData","getGazDataForTopicIds","factory","featureCollectionContext","filterDescription","stationsArten","parts","art","push","slice","join","ReactChartkick","addAdapter","Chart","InfoPanel","station","minHeight4MainSextion","last12","valueCounter","outageCounter","avgs","parse","last12ChartData","last12Colors","avgsChartData","yearValues","Math","min","lastYearValues","lastYearM1Values","lym1","getLastYearMinus1Measurements","twoYearVals","index","max","years","currentYear","entry","Color","fade","subSections","SecondaryInfoPanelSection","bsStyle","fontSize","padding","paddingTop","data","library","lineTension","steppedLine","cubicInterpolationMode","backgroundColor","borderColor","hoverBackgroundColor","hoverBorderColor","SecondaryInfo","titleIconName","mainSection","width","minHeight","alt","paddingLeft","paddingRight","float","paddingBottom","src","von","toLocaleDateString","round","App","document","TopicMapContextProvider","appKey","featureItemsURL","getFeatureStyler","getGTMFeatureStyler","featureTooltipFunction","clusteringOptions","iconCreateFunction","getClusterIconCreatorFunction","props","additionalLayerConfiguration","initialActive","layer","titleFactory","classKeyFunction","getColorFromProperties","TopicMapComponent","locatorControl","modalMenu","gazetteerSearchPlaceholder","infoBox","GenericInfoBoxFromFeature","pixelwidth","config","displaySecondaryInfoAction","city","navigator","noun","singular","plural","noCurrentFeatureTitle","noCurrentFeatureContent","secondaryInfo","ContactButton","action","link","createElement","setAttribute","br","mailToHref","encodeURI","window","href","replace","body","appendChild","click","FeatureCollection","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.c47a97c7.chunk.js","sourcesContent":["export const host = \"https://wupp-topicmaps-data.cismet.de\";\n\nexport const LOOKUP = {\n  abgebaut: {\n    color: \"#9DBCCC\",\n    signature: \"Luft_Icon_Messstation_abgebaut_farbig.svg\",\n    header: \"Messstation für NO₂ (inaktiv, abmontiert)\",\n    title: \"abgebaut\",\n    filterTitle: \"abgebaute\",\n  },\n  inaktiv: {\n    color: \"#4FAFC5\",\n    signature: \"Luft_Icon_Messstation_deaktiv_farbig.svg\",\n    header: \"Messstation für NO₂ (aktiv, aktuell Messausfall)\",\n    title: \"inaktiv\",\n    filterTitle: \"inaktive\",\n  },\n  unauffaellig: {\n    color: \"#9ACD32\",\n    signature: \"Luft_Icon_Messstation_unauffaellig_farbig.svg\",\n    header: \"Messstation für NO₂ (aktiv, unauffällig)\",\n    title: \"unauffällig\",\n    filterTitle: \"unauffällige\",\n  },\n  auffaellig: {\n    color: \"#FFA500\",\n    signature: \"Luft_Icon_Messstation_auffaellig_farbig.svg\",\n    header: \"Messstation für NO₂ (aktiv, auffällig)\",\n    title: \"auffällig\",\n    filterTitle: \"auffällige\",\n  },\n  warnend: {\n    color: \"#E01414\",\n    signature: \"Luft_Icon_Messstation_warnend_farbig.svg\",\n    header: \"Messstation für NO₂ (aktiv, warnend)\",\n    title: \"warnend\",\n    filterTitle: \"warnende\",\n  },\n  unknown: { color: \"#eeeeee\", signature: \"Platz.svg\", header: \"Fehler\" },\n};\n\nexport const MONTHS = [\n  { name: \"Januar\", shortname: \"Jan.\" },\n  { name: \"Februar\", shortname: \"Feb.\" },\n  { name: \"März\", shortname: \"Mär.\" },\n  { name: \"April\", shortname: \"Apr.\" },\n  { name: \"Mai\", shortname: \"Mai.\" },\n  { name: \"Juni\", shortname: \"Jun.\" },\n  { name: \"Juli\", shortname: \"Jul.\" },\n  { name: \"August\", shortname: \"Aug.\" },\n  { name: \"September\", shortname: \"Sep.\" },\n  { name: \"Oktober\", shortname: \"Okt.\" },\n  { name: \"November\", shortname: \"Nov.\" },\n  { name: \"Dezember\", shortname: \"Dez.\" },\n];\n","import { addSVGToProps } from \"react-cismap/tools/svgHelper\";\n\nimport { useContext } from \"react\";\nimport { FeatureCollectionContext } from \"react-cismap/contexts/FeatureCollectionContextProvider\";\nimport { LOOKUP, MONTHS } from \"./constants\";\n\nconst hasValues = (item) => {\n  const values = item?.werte;\n  return values !== undefined && JSON.stringify(values) !== \"{}\";\n};\n\nconst getLastMeasurement = (item) => {\n  const lym = getLastYearMeasurements(item);\n\n  if (lym) {\n    const { values: lymValues, year } = lym;\n    if (lymValues.length === 13) {\n      return { value: lymValues[11], monthIndex: 11, year };\n    } else {\n      return { value: lymValues[lymValues.length - 1], monthIndex: lymValues.length - 1, year };\n    }\n  }\n};\nconst getLastYear = (item) => {\n  if (hasValues(item)) {\n    const values = item?.werte;\n    const sortedkeys = Object.keys(values).sort();\n    return sortedkeys[sortedkeys.length - 1];\n  }\n};\nconst getLastYearM1 = (item) => {\n  if (hasValues(item)) {\n    const values = item?.werte;\n    const sortedkeys = Object.keys(values).sort();\n    if (sortedkeys.length > 1) {\n      return sortedkeys[sortedkeys.length - 2];\n    }\n  }\n};\n\nexport const getLastYearMeasurements = (item) => {\n  const ly = getLastYear(item);\n  const values = item?.werte;\n  if (ly) {\n    return { values: values[ly], year: ly };\n  }\n};\nexport const getLastYearMinus1Measurements = (item) => {\n  const lym1 = getLastYearM1(item);\n  const values = item?.werte;\n  if (lym1) {\n    return values[lym1];\n  }\n};\n\nconst getActivityStatus = (item) => {\n  if (item?.bis !== undefined) {\n    return \"abgebaut\";\n  } else {\n    return \"aktiv\";\n  }\n  //todo inaktiv\n};\n\n// unauffällig 1-35 (einschließlich) µg/m³ Grün\n// auffällig 36-40 (einschließlich) µg/m³ Orange\n// warnend >40 µg/m³ Rot\nexport const getStatus = (item) => {\n  if (getActivityStatus(item) === \"aktiv\") {\n    const lym = getLastMeasurement(item)?.value;\n\n    return getStatus4Value(lym);\n  } else {\n    return getActivityStatus(item);\n  }\n};\n\n// export const getStatus4Value = (value) => {\n//   if (value > 0 && value <= 35) {\n//     return \"unauffaellig\";\n//   } else if (value > 35 && value <= 40) {\n//     return \"auffaellig\";\n//   } else if (value > 40) {\n//     return \"warnend\";\n//   } else if (value === 9999) {\n//     return \"inaktiv\";\n//   } else {\n//     return \"unknown\";\n//   }\n// };\n\nexport const getStatus4Value = (value) => {\n  if (value > 0 && value <= 28) {\n    return \"unauffaellig\";\n  } else if (value > 28 && value <= 33) {\n    return \"auffaellig\";\n  } else if (value > 33) {\n    return \"warnend\";\n  } else if (value === 9999) {\n    return \"inaktiv\";\n  } else {\n    return \"unknown\";\n  }\n};\n\nconst getSignature = (item) => {\n  const status = getStatus(item);\n  return LOOKUP[status].signature;\n};\n\nconst getAdditionalInfo = (item) => {\n  const lastYear = getLastYear(item);\n  const lastYearM1 = getLastYearM1(item);\n\n  const lastYearAverage = item?.mittelwerte[lastYear];\n  const lastYearM1Average = item?.mittelwerte[lastYearM1];\n\n  let ret = \"\";\n  if (lastYearAverage || lastYearM1Average) {\n    ret = \"gewichtete Jahresmittelwerte:\";\n    if (lastYearAverage) {\n      ret = ret + \"\\n\" + lastYearAverage + \" µg/m³ (\" + lastYear + \")\";\n    }\n    if (lastYearM1Average) {\n      ret = ret + \"\\n\" + lastYearM1Average + \" µg/m³ (\" + lastYearM1 + \")\";\n    }\n  }\n\n  return ret;\n};\n\nconst getTitle = (item) => {\n  const lm = getLastMeasurement(item);\n\n  if (item?.bis) {\n    const demontage = new Date(item?.bis);\n\n    return `Diese Messstation ist seit ${\n      MONTHS[demontage.getMonth() - 1].name\n    } ${demontage.getFullYear()} abmontiert.`;\n  } else {\n    if (lm) {\n      if (lm.value !== 9999) {\n        return lm.value + \" µg/m³ (\" + MONTHS[lm.monthIndex].name + \" \" + lm.year + \")\";\n      } else {\n        return (\n          \"Für \" +\n          MONTHS[lm.monthIndex].name +\n          \" \" +\n          lm.year +\n          \"liefert diese Messstation keinen Messwert\"\n        );\n      }\n    } else {\n      return \"Diese Messstation ist abmontiert\";\n    }\n  }\n};\n\nconst convertItemToFeature = async (itemIn) => {\n  //   console.log(\"itemIn\", itemIn);\n\n  let item = await addSVGToProps(itemIn, (i) => \"luft/\" + getSignature(i));\n  item.status = getStatus(item);\n  const text =\n    item?.strasse +\n    \" \" +\n    (item?.hausnummer || \"\") +\n    (item?.zusatzinfo !== undefined ? \" (\" + item?.zusatzinfo + \")\" : \"\");\n\n  const type = \"Feature\";\n  const selected = false;\n  const geometry = item?.geojson;\n  item.color = LOOKUP[item.status].color;\n  const info = {\n    header: LOOKUP[item.status].header,\n    title: getTitle(item),\n    additionalInfo: getAdditionalInfo(item),\n    subtitle: (\n      <span>\n        {item?.strasse} {item?.hausnummer} {item?.zusatzinfo && <span>({item?.zusatzinfo})</span>}\n      </span>\n    ),\n  };\n  item.info = info;\n  if (item?.bild) {\n    item.foto = \"https://www.wuppertal.de/geoportal/luftmessstationen/fotos/\" + item.bild;\n  }\n\n  return {\n    text,\n    type,\n    selected,\n    geometry,\n    crs: {\n      type: \"name\",\n      properties: {\n        name: \"urn:ogc:def:crs:EPSG::25832\",\n      },\n    },\n    properties: item,\n  };\n};\nexport default convertItemToFeature;\n","import { useContext } from \"react\";\nimport {\n  FeatureCollectionContext,\n  FeatureCollectionDispatchContext,\n} from \"react-cismap/contexts/FeatureCollectionContextProvider\";\nimport { UIDispatchContext } from \"react-cismap/contexts/UIContextProvider\";\nimport { getSimpleHelpForTM } from \"react-cismap/tools/uiHelper\";\nimport { Link } from \"react-scroll\";\nimport ModalApplicationMenu from \"react-cismap/topicmaps/menu/ModalApplicationMenu\";\nimport Section from \"react-cismap/topicmaps/menu/Section\";\nimport FilterPanel from \"react-cismap/topicmaps/menu/FilterPanel\";\nimport DefaultSettingsPanel from \"react-cismap/topicmaps/menu/DefaultSettingsPanel\";\nimport ConfigurableDocBlocks from \"react-cismap/topicmaps/ConfigurableDocBlocks\";\nimport { LOOKUP } from \"./helper/constants\";\nconst MyMenu = () => {\n  const { setAppMenuActiveMenuSection } = useContext(UIDispatchContext);\n  const { filterState, filterMode, filteredItems, shownFeatures } = useContext(\n    FeatureCollectionContext\n  );\n  const { setFilterState, setFilterMode } = useContext(FeatureCollectionDispatchContext);\n\n  const { items } = useContext(FeatureCollectionContext);\n\n  const kategorien = [];\n  const katValues = [];\n  const themen = [];\n  const themenValues = [];\n  const topicMapTitle = \"Luftmessstationskarte Wuppertal\";\n\n  const getFilterHeader = () => {\n    const count = filteredItems?.length || 0;\n\n    let term;\n    if (count === 1) {\n      term = \"Standort\";\n    } else {\n      term = \"Standorte\";\n    }\n\n    return `Messstationen der Luftqualität (${count} ${term} gefunden, davon ${\n      shownFeatures?.length || \"0\"\n    } in der Karte)`;\n  };\n\n  const filterConfiguration = {\n    mode: \"list\", // list or tabs\n    resetedFilter: {\n      stations: [\"unauffaellig\", \"auffaellig\", \"warnend\", \"inaktiv\", \"abgebaut\"],\n    },\n    filterMode: \"gibtnureinen\",\n    filters: [\n      {\n        title: \"aktive Messstationen\",\n        key: \"stations\",\n        type: \"checkBoxes\",\n        values: [\n          {\n            keys: [\"unauffaellig\", \"auffaellig\", \"warnend\", \"inaktiv\"],\n            title: \"alle aktiven Stationen\",\n          },\n          {\n            key: \"unauffaellig\",\n            indent: 30,\n            title: \"nur unauffällige Stationen\",\n            color: LOOKUP.unauffaellig.color,\n            icon: \"square\",\n            iconPos: \"pre\",\n          },\n          {\n            key: \"auffaellig\",\n            indent: 30,\n            title: \"nur auffällige Stationen\",\n            color: LOOKUP.auffaellig.color,\n            icon: \"square\",\n            iconPos: \"pre\",\n          },\n          {\n            key: \"warnend\",\n            indent: 30,\n            title: \"nur warnende Stationen\",\n            color: LOOKUP.warnend.color,\n            icon: \"square\",\n            iconPos: \"pre\",\n          },\n          {\n            key: \"inaktiv\",\n            indent: 30,\n            title: \"nur Stationen mit Messausfall\",\n            color: LOOKUP.inaktiv.color,\n            icon: \"square\",\n            iconPos: \"pre\",\n          },\n        ],\n        setAll: () => {\n          setFilterState({ ...filterState, themen });\n        },\n        setNone: () => {\n          setFilterState({ ...filterState, themen: [] });\n        },\n        colorizer: (item, selected) => (selected ? item.color : \"#eeeeee\"),\n      },\n      {\n        title: \"inaktive Messstationen\",\n        key: \"stations\",\n        type: \"checkBoxes\",\n        values: [\n          {\n            key: \"abgebaut\",\n            title: \"inaktive Stationen\",\n            color: LOOKUP.inaktiv.color,\n            icon: \"square\",\n            iconPos: \"pre\",\n          },\n        ],\n        setAll: () => {\n          setFilterState({ ...filterState, kategorien });\n        },\n        setNone: () => {\n          setFilterState({ ...filterState, kategorien: [] });\n        },\n      },\n    ],\n  };\n  const simpleHelp = undefined;\n\n  return (\n    <ModalApplicationMenu\n      menuIcon={\"bars\"}\n      menuTitle={\"Filter, Einstellungen und Kompaktanleitung\"}\n      menuIntroduction={\n        <span>\n          Benutzen Sie die Auswahlmöglichkeiten unter{\" \"}\n          <Link\n            className='useAClassNameToRenderProperLink'\n            to='filter'\n            containerId='myMenu'\n            smooth={true}\n            delay={100}\n            onClick={() => setAppMenuActiveMenuSection(\"filter\")}\n          >\n            Filter\n          </Link>\n          , um die in der Karte angezeigten vorbildlichen Luftmessstationen für Stickstoffdioxid\n          (NO₂) auf die für Sie relevanten Stationen zu beschränken. Über{\" \"}\n          <Link\n            className='useAClassNameToRenderProperLink'\n            to='settings'\n            containerId='myMenu'\n            smooth={true}\n            delay={100}\n            onClick={() => setAppMenuActiveMenuSection(\"settings\")}\n          >\n            Einstellungen\n          </Link>{\" \"}\n          können Sie die Darstellung der Hintergrundkarte und der Stationen an Ihre Vorlieben\n          anpassen. Wählen Sie die{\" \"}\n          <Link\n            className='useAClassNameToRenderProperLink'\n            to='help'\n            containerId='myMenu'\n            smooth={true}\n            delay={100}\n            onClick={() => setAppMenuActiveMenuSection(\"help\")}\n          >\n            Kompaktanleitung\n          </Link>{\" \"}\n          für detailliertere Bedienungsinformationen.\n        </span>\n      }\n      menuSections={[\n        <Section\n          key='filter'\n          sectionKey='filter'\n          sectionTitle={getFilterHeader()}\n          sectionBsStyle='primary'\n          sectionContent={<FilterPanel filterConfiguration={filterConfiguration} />}\n        />,\n        <DefaultSettingsPanel\n          previewMapPosition='lat=51.2607860760692&lng=7.164304562911684&title&zoom=9'\n          previewMapClusteringOptions={undefined}\n          key='settings'\n        />,\n        <Section\n          key='help'\n          sectionKey='help'\n          sectionTitle='Kompaktanleitung'\n          sectionBsStyle='default'\n          sectionContent={\n            <ConfigurableDocBlocks configs={getSimpleHelpForTM(topicMapTitle, simpleHelp)} />\n          }\n        />,\n      ]}\n    />\n  );\n};\nexport default MyMenu;\n","import { useContext } from \"react\";\nimport { FeatureCollectionContext } from \"react-cismap/contexts/FeatureCollectionContextProvider\";\n\nconst LogSelection = () => {\n  const { selectedFeature } = useContext(FeatureCollectionContext);\n  console.log(\"selectedFeature.properties\", selectedFeature?.properties);\n\n  return <div></div>;\n};\n\nexport default LogSelection;\n","import { FeatureCollectionDisplayWithTooltipLabels } from \"react-cismap\";\nimport { useEffect, useContext, useState } from \"react\";\nimport { TopicMapContext } from \"react-cismap/contexts/TopicMapContextProvider\";\nimport { md5FetchJSON } from \"react-cismap/tools/fetching\";\nimport { host } from \"./helper/constants\";\n\nconst getUWZ = async (setUWZ) => {\n  const uwz = await md5FetchJSON(\"MapData\", host + \"/data/umweltzonen.json\");\n  setUWZ(uwz);\n};\n\nconst UWZ = () => {\n  const [uwz, setUWZ] = useState([]);\n  const { location } = useContext(TopicMapContext);\n  useEffect(() => {\n    getUWZ(setUWZ);\n  }, []);\n\n  return (\n    <FeatureCollectionDisplayWithTooltipLabels\n      key={\"ds\"}\n      featureCollection={uwz}\n      style={(feature) => {\n        const style = {\n          color: \"#155317\",\n          weight: 3,\n          opacity: 0.5,\n          fillColor: \"#155317\",\n          fillOpacity: 0.15,\n        };\n        return style;\n      }}\n      labeler={(feature) => {\n        const currentZoom = location?.zoom || 8;\n        if (currentZoom > 7) {\n          return (\n            <h3\n              style={{\n                color: \"#155317\",\n                opacity: 0.7,\n                textShadow:\n                  \"1px 1px 0px  #000000,-1px 1px 0px  #000000, 1px -1px 0px  #000000, -1px -1px 0px  #000000, 2px 2px 15px #000000\",\n              }}\n            >\n              Umweltzone\n            </h3>\n          );\n        }\n      }}\n      featureClickHandler={() => {}}\n    />\n  );\n};\nexport default UWZ;\n","import { getStatus } from \"./convertItemToFeature\";\n\nconst itemFilterFunction = ({ filterState }) => {\n  return (item) => {\n    return filterState?.stations?.includes(getStatus(item));\n  };\n};\nexport default itemFilterFunction;\n","import { md5FetchText } from \"react-cismap/tools/fetching\";\nimport { getGazDataForTopicIds } from \"react-cismap/tools/gazetteerHelper\";\nimport { host } from \"./constants\";\n\nexport const getGazData = async (setGazData) => {\n  const prefix = \"GazData\";\n  const sources = {};\n\n  sources.adressen = await md5FetchText(prefix, host + \"/data/adressen.json\");\n  sources.bezirke = await md5FetchText(prefix, host + \"/data/bezirke.json\");\n  sources.quartiere = await md5FetchText(prefix, host + \"/data/quartiere.json\");\n  sources.pois = await md5FetchText(prefix, host + \"/data/pois.json\");\n  sources.kitas = await md5FetchText(prefix, host + \"/data/kitas.json\");\n  sources.no2 = await md5FetchText(prefix, host + \"/data/no2.json\");\n\n  const gazData = getGazDataForTopicIds(sources, [\n    \"no2\",\n    \"pois\",\n    \"kitas\",\n    \"bezirke\",\n    \"quartiere\",\n    \"adressen\",\n  ]);\n\n  setGazData(gazData);\n};\n","import { LOOKUP } from \"./constants\";\nconst factory = ({ featureCollectionContext }) => {\n  const getThemaById = (id) => {\n    const result = featureCollectionContext?.items?.find((item) => item?.thema?.id === id);\n    return result?.thema?.name;\n  };\n  console.log(\"featureCollectionContext?.filterState?\", featureCollectionContext?.filterState);\n\n  let filterDescription = \"?\";\n  if (featureCollectionContext?.filteredItems?.length === featureCollectionContext?.items?.length) {\n    filterDescription = undefined;\n  } else {\n    const stationsArten = featureCollectionContext?.filterState?.stations;\n\n    if (\n      stationsArten.includes(\"unauffaellig\") &&\n      stationsArten.includes(\"auffaellig\") &&\n      stationsArten.includes(\"warnend\") &&\n      stationsArten.includes(\"inaktiv\")\n    ) {\n      filterDescription = \"nur aktive Messstationen\";\n    } else if (stationsArten.length === 1) {\n      filterDescription = `nur ${LOOKUP[stationsArten[0]].filterTitle} Messstationen`;\n    } else {\n      const parts = [];\n      for (const art of stationsArten) {\n        parts.push(LOOKUP[art].filterTitle);\n      }\n\n      filterDescription = `nur ${parts.slice(0, parts.length - 1).join(\", \")} und ${\n        parts[parts.length - 1]\n      } Messstationen`;\n    }\n  }\n\n  // if (featureCollectionContext?.filteredItems?.length === 0) {\n  //   return (\n  //     <div>\n  //       <b>Keine Luftmessstationen gefunden!</b> Bitte überprüfen Sie Ihre Filtereinstellungen.\n  //     </div>\n  //   );\n  // }\n\n  if (filterDescription) {\n    return (\n      <div>\n        <b>Meine Messstationen der Luftqualität:</b> {filterDescription}\n      </div>\n    );\n  } else {\n    return undefined;\n  }\n};\n\nexport default factory;\n","import React, { useContext } from \"react\";\nimport { FeatureCollectionContext } from \"react-cismap/contexts/FeatureCollectionContextProvider\";\nimport SecondaryInfoPanelSection from \"react-cismap/topicmaps/SecondaryInfoPanelSection\";\nimport SecondaryInfo from \"react-cismap/topicmaps/SecondaryInfo\";\nimport {\n  getLastYearMeasurements,\n  getLastYearMinus1Measurements,\n  getStatus4Value,\n} from \"./helper/convertItemToFeature\";\nimport Chart from \"chart.js\";\nimport ReactChartkick, { LineChart, BarChart, ColumnChart, ScatterChart } from \"react-chartkick\";\nimport { LOOKUP, MONTHS } from \"./helper/constants\";\nimport Color from \"color\";\nReactChartkick.addAdapter(Chart);\n\nconst InfoPanel = () => {\n  const { selectedFeature, items } = useContext(FeatureCollectionContext);\n\n  const station = selectedFeature?.properties;\n\n  if (station !== undefined) {\n    let foto = station?.foto;\n\n    let minHeight4MainSextion = undefined;\n    if (foto !== undefined) {\n      minHeight4MainSextion = 250;\n    }\n\n    // --- value and outage counter and avg of the last 10 years\n    let valueCounter = 0;\n    let outageCounter = 0;\n    const avgs = JSON.parse(JSON.stringify(station?.mittelwerte));\n    const last12ChartData = [];\n\n    const last12Colors = [];\n    const avgsChartData = [];\n\n    for (const year of Object.keys(station.werte)) {\n      const yearValues = station.werte[year];\n      for (let i = 0; i < Math.min(yearValues.length, 12); ++i) {\n        if (yearValues[i] === -9999) {\n          outageCounter++;\n        } else {\n          valueCounter++;\n        }\n      }\n    }\n\n    let last12;\n\n    if (station?.werte && Object.keys(station?.werte).length > 0) {\n      // --- measurements of the last 12 months\n      let { values: lastYearValues, year: lastYear } = getLastYearMeasurements(station);\n      let lastYearM1Values = getLastYearMinus1Measurements(station);\n\n      let twoYearVals = [];\n      if (lastYearM1Values) {\n        let index = 0;\n        for (const value of lastYearM1Values) {\n          twoYearVals.push({ year: lastYear - 1, index, value });\n          index++;\n        }\n      }\n      if (lastYearValues) {\n        let index = 0;\n        for (const value of lastYearValues) {\n          twoYearVals.push({ year: lastYear, index, value });\n          index++;\n        }\n      }\n\n      last12 = twoYearVals.slice(Math.max(twoYearVals.length - 12, 0));\n\n      // --- avg of the last 10 years means delete the first n values\n      //     where n=count of keys in werte-10\n      const years = Object.keys(station.werte);\n      const firstNElementsToDestroy = years.length - 10;\n      const currentYear = new Date().getFullYear();\n      console.log(\"xxx currentYear\", currentYear);\n\n      for (const year of years) {\n        if (year < currentYear - 11) {\n          delete avgs[year];\n        }\n      }\n\n      // ---create the chart objects\n\n      for (const entry of last12) {\n        const key = entry.year + \" \" + MONTHS[entry.index].shortname;\n        if (entry.value !== -9999) {\n          last12ChartData.push([key, entry.value]);\n          last12Colors.push(new Color(LOOKUP[getStatus4Value(entry.value)].color).fade(0.5));\n        } else {\n          last12ChartData.push([key, null]);\n          last12Colors.push(null);\n        }\n      }\n\n      for (const year of Object.keys(avgs)) {\n        avgsChartData.push([year, avgs[year]]);\n      }\n    }\n\n    const subSections = [];\n\n    if (station?.bis === undefined) {\n      subSections.push(\n        <SecondaryInfoPanelSection\n          key='last12'\n          bsStyle='info'\n          header={\"NO₂-Messwerte der letzten 12 Monate\"}\n        >\n          <div style={{ fontSize: \"115%\", padding: \"10px\", paddingTop: \"0px\" }}>\n            <LineChart\n              data={[\n                {\n                  name: \"NO₂-Messwerte der letzten 12 Monate\",\n                  data: last12ChartData,\n                  library: { lineTension: 0 },\n                },\n              ]}\n            />\n            <LineChart\n              data={[\n                {\n                  name: \"NO₂-Messwerte der letzten 12 Monate\",\n                  data: last12ChartData,\n                  library: { steppedLine: \"middle\" },\n                },\n              ]}\n            />{\" \"}\n            <LineChart\n              data={[\n                {\n                  data: last12ChartData,\n                  library: { cubicInterpolationMode: \"yes\" },\n                },\n              ]}\n            />\n            <ColumnChart\n              data={[\n                {\n                  data: last12ChartData,\n                  library: {\n                    backgroundColor: last12Colors,\n                    borderColor: last12Colors,\n                    hoverBackgroundColor: last12Colors,\n                    hoverBorderColor: last12Colors,\n                  },\n                },\n              ]}\n            />\n            {/* <pre>{JSON.stringify(last12LineChartData, null, 2)}</pre> */}\n          </div>\n        </SecondaryInfoPanelSection>\n      );\n    }\n\n    if (Object.keys(avgsChartData).length > 0) {\n      subSections.push(\n        <SecondaryInfoPanelSection\n          key='average10'\n          bsStyle='warning'\n          header={\"NO₂-Jahresmittelwerte der letzten zehn Kalenderjahre\"}\n        >\n          <div style={{ fontSize: \"115%\", padding: \"10px\", paddingTop: \"0px\" }}>\n            <LineChart data={avgsChartData} />\n\n            {/* <pre>{JSON.stringify(avgs, null, 2)}</pre> */}\n          </div>\n        </SecondaryInfoPanelSection>\n      );\n    }\n\n    // subSections.push(\n    //   <SecondaryInfoPanelSection\n    //     key='last12'\n    //     bsStyle='default'\n    //     header={\"Data: NO₂-Messwerte der letzten 12 Monate\"}\n    //   >\n    //     <div style={{ fontSize: \"115%\", padding: \"10px\", paddingTop: \"0px\" }}>\n    //       <pre>{JSON.stringify(last12ChartData, null, 2)}</pre>\n    //     </div>\n    //   </SecondaryInfoPanelSection>\n    // );\n\n    // subSections.push(\n    //   <SecondaryInfoPanelSection\n    //     key='average10'\n    //     bsStyle='default'\n    //     header={\"Data: NO₂-Jahresmittelwerte der letzten zehn Kalenderjahre\"}\n    //   >\n    //     <div style={{ fontSize: \"115%\", padding: \"10px\", paddingTop: \"0px\" }}>\n    //       <pre>{JSON.stringify(avgs, null, 2)}</pre>\n    //     </div>\n    //   </SecondaryInfoPanelSection>\n    // );\n\n    console.log(\"Data: NO₂-Messwerte der letzten 12 Monate\", last12ChartData);\n    console.log(\"Data: NO₂-Jahresmittelwerte der letzten zehn Kalenderjahre\", avgs);\n\n    return (\n      <SecondaryInfo\n        titleIconName='info-circle'\n        title={\"Datenblatt: Messstation für Stickstoffdioxid (NO₂)\"}\n        mainSection={\n          <div style={{ width: \"100%\", minHeight: minHeight4MainSextion }}>\n            {foto !== undefined && (\n              <img\n                alt='Bild'\n                style={{\n                  paddingLeft: 10,\n                  paddingRight: 10,\n                  float: \"right\",\n                  paddingBottom: \"5px\",\n                }}\n                src={foto}\n                width='250'\n              />\n            )}\n            <div style={{ fontSize: \"115%\", padding: \"10px\", paddingTop: \"0px\" }}>\n              <b>Adresse:</b>\n\n              <p>\n                {station?.strasse} {station?.hausnummer}{\" \"}\n                {station?.zusatzinfo && <span>({station?.zusatzinfo})</span>}\n              </p>\n\n              <b>Stationsaktivität:</b>\n\n              {station?.bis !== undefined && (\n                <p>\n                  Von {new Date(station?.von).toLocaleDateString()} bis{\" \"}\n                  {new Date(station?.bis).toLocaleDateString()} generierte diese Station insgesamt{\" \"}\n                  {valueCounter} NO₂-Messwerte (Ausfälle nicht berücksichtigt).\n                </p>\n              )}\n              {station?.bis === undefined && (\n                <p>\n                  Seit {new Date(station?.von).toLocaleDateString()} generierte diese Station{\" \"}\n                  {valueCounter} NO₂-Messwerte (Ausfälle nicht berücksichtigt).\n                </p>\n              )}\n              <b>Messausfälle:</b>\n              {outageCounter > 0 && (\n                <p>\n                  Diese Messstation generierte an {outageCounter}{\" \"}\n                  {outageCounter === 1 ? \"Monat\" : \"Monaten\"} einen Messausfall. Damit besitzt sie\n                  eine Zuverlässigkeit von{\" \"}\n                  {Math.round((valueCounter / (valueCounter + outageCounter)) * 1000) / 10}\n                  %.\n                </p>\n              )}\n              {outageCounter === 0 && (\n                <p>\n                  Diese Messstation lieferte in jedem Monat der Stationsaktivität einen\n                  NO₂-Messwert. Damit liegt bisher kein Messausfall vor.\n                </p>\n              )}\n            </div>\n          </div>\n        }\n        subSections={subSections}\n      />\n    );\n  } else {\n    return null;\n  }\n};\nexport default InfoPanel;\n","import { useEffect } from \"react\";\n\nimport \"./App.css\";\nimport { useState } from \"react\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"leaflet/dist/leaflet.css\";\nimport \"react-bootstrap-typeahead/css/Typeahead.css\";\nimport \"react-cismap/topicMaps.css\";\nimport TopicMapContextProvider from \"react-cismap/contexts/TopicMapContextProvider\";\nimport TopicMapComponent from \"react-cismap/topicmaps/TopicMapComponent\";\nimport FeatureCollection from \"react-cismap/FeatureCollection\";\nimport GenericInfoBoxFromFeature from \"react-cismap/topicmaps/GenericInfoBoxFromFeature\";\n\nimport getGTMFeatureStyler from \"react-cismap/topicmaps/generic/GTMStyler\";\nimport ContactButton from \"react-cismap/ContactButton\";\nimport convertItemToFeature, { getStatus } from \"./helper/convertItemToFeature\";\n\nimport { getClusterIconCreatorFunction } from \"react-cismap/tools/uiHelper\";\nimport MyMenu from \"./Menu\";\nimport LogSelection from \"./helper/LogSelectedFeature\";\nimport UWZ from \"./Umweltzonenlayer\";\nimport itemFilterFunction from \"./helper/filterFunction\";\nimport { LOOKUP } from \"./helper/constants\";\nimport { getGazData } from \"./helper/getGazData\";\nimport titleFactory from \"./helper/titleFactory\";\nimport InfoPanel from \"./SecondaryInfo\";\n\nfunction App() {\n  const [gazData, setGazData] = useState([]);\n\n  useEffect(() => {\n    getGazData(setGazData);\n    document.title = \"Luftmessstationskarte Wuppertal\";\n  }, []);\n  return (\n    <TopicMapContextProvider\n      appKey='LuftmessstationenWuppertal.TopicMap'\n      featureItemsURL={\"https://wupp-topicmaps-data.cismet.de/data/no2.data.json\"}\n      // featureItemsURL={\"/data/no2.data.json\"} //for dev purpose only\n      getFeatureStyler={getGTMFeatureStyler}\n      featureTooltipFunction={(feature) => feature?.text}\n      convertItemToFeature={convertItemToFeature}\n      clusteringOptions={{\n        iconCreateFunction: getClusterIconCreatorFunction(30, (props) => props.color),\n      }}\n      additionalLayerConfiguration={{\n        uwz: {\n          title: \"Umweltzone\",\n          initialActive: true,\n          layer: <UWZ />,\n        },\n      }}\n      filterState={{\n        stations: [\"unauffaellig\", \"auffaellig\", \"warnend\", \"inaktiv\", \"abgebaut\"],\n      }}\n      titleFactory={titleFactory}\n      itemFilterFunction={itemFilterFunction}\n      classKeyFunction={(item) => LOOKUP[getStatus(item)].title}\n      getColorFromProperties={(item) => LOOKUP[getStatus(item)].color}\n    >\n      <TopicMapComponent\n        locatorControl={true}\n        gazData={gazData}\n        modalMenu={<MyMenu />}\n        gazetteerSearchPlaceholder='Stadtteil | Adresse | POI'\n        infoBox={\n          <GenericInfoBoxFromFeature\n            pixelwidth={350}\n            config={{\n              displaySecondaryInfoAction: true,\n\n              city: \"Wuppertal\",\n              navigator: {\n                noun: {\n                  singular: \"Messstation\",\n                  plural: \"Messstationen\",\n                },\n              },\n              noCurrentFeatureTitle: \"Keine Messtationen gefunden\",\n              noCurrentFeatureContent: \"\",\n            }}\n          />\n        }\n        secondaryInfo={<InfoPanel />}\n      >\n        <ContactButton\n          title='Rückfrage zu den Messwerten'\n          action={() => {\n            let link = document.createElement(\"a\");\n            link.setAttribute(\"type\", \"hidden\");\n            const br = \"\\n\";\n\n            let mailToHref =\n              \"mailto:luftreinhaltung@stadt.wuppertal.de?subject=Rückfrage zu Messwerten&body=\" +\n              encodeURI(`Sehr geehrte Damen und Herren,${br}${br} zu der Luftmessstationskarte `) +\n              encodeURI(`auf${br}${br}`) +\n              `${window.location.href.replace(/&/g, \"%26\").replace(/#/g, \"%23\")}` +\n              encodeURI(\n                `${br}` +\n                  `${br}` +\n                  `habe ich folgende Frage:${br}` +\n                  `${br}${br}${br}${br}` +\n                  `Mit freundlichen Grüßen${br}` +\n                  `${br}` +\n                  `${br}`\n              );\n            document.body.appendChild(link);\n            //link.href = downloadOptions.url;\n            link.href = mailToHref;\n            //link.download = downloadOptions.file;\n            //link.target = \"_blank\";\n            link.click();\n          }}\n        />\n        <FeatureCollection></FeatureCollection>\n        <LogSelection />\n      </TopicMapComponent>\n    </TopicMapContextProvider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}