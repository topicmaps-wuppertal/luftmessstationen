(this.webpackJsonpluftmessstationen=this.webpackJsonpluftmessstationen||[]).push([[0],{353:function(e,t,n){},354:function(e,t,n){},677:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(16),i=n.n(o),s=(n(353),n(13)),u=(n(354),n(355),n(356),n(357),n(358),n(26)),c=n(347),l=n(189),d=n(348),f=n(345),v=n(346),g=n(19),p=n.n(g),b=n(43),h=n(134),j=n(53),m=n(190),O=n(33),w=n(39),k="https://wupp-topicmaps-data.cismet.de",x={abgebaut:{color:"#9DBCCC",signature:"Luft_Icon_Messstation_abgebaut_farbig.svg",header:"Messstation f\xfcr NO\xb2 (inaktiv, demontiert)"},inaktiv:{color:"#4AFAFC5",signature:"Luft_Icon_Messstation_deaktiv_farbig.svg",header:"Messstation f\xfcr NO\xb2 (aktiv, aktuell Messausfall)"},unauffaellig:{color:"#9ACD32",signature:"Luft_Icon_Messstation_unauffaellig_farbig.svg",header:"Messstation f\xfcr NO\xb2 (aktiv, unauff\xe4llig)"},auffaellig:{color:"#FFA500",signature:"Luft_Icon_Messstation_auffaellig_farbig.svg",header:"Messstation f\xfcr NO\xb2 (aktiv, auff\xe4llig)"},warnend:{color:"#E01414",signature:"Luft_Icon_Messstation_warnend_farbig.svg",header:"Messstation f\xfcr NO\xb2 (aktiv, warnend)"},unknown:{color:"#eeeeee",signature:"Platz.svg",header:"Fehler"}},M=["Januar","Februar","M\xe4rz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],F=function(){var e=Object(b.a)(p.a.mark((function e(t){var n,a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="GazDataForStories",a={},e.next=4,Object(j.c)(n,k+"/data/adressen.json");case 4:return a.adressen=e.sent,e.next=7,Object(j.c)(n,k+"/data/bezirke.json");case 7:return a.bezirke=e.sent,e.next=10,Object(j.c)(n,k+"/data/quartiere.json");case 10:return a.quartiere=e.sent,e.next=13,Object(j.c)(n,k+"/data/pois.json");case 13:return a.pois=e.sent,e.next=16,Object(j.c)(n,k+"/data/kitas.json");case 16:a.kitas=e.sent,r=Object(m.b)(a,["pois","kitas","bezirke","quartiere","adressen"]),t(r);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(e){var t=null===e||void 0===e?void 0:e.werte;return void 0!==t&&"{}"!==JSON.stringify(t)},_=function(e){var t=C(e);if(t){var n=t.values,a=t.year;return 13===n.length?{value:n[11],monthIndex:11,year:a}:{value:n[n.length-1],monthIndex:n.length-1,year:a}}},I=function(e){if(y(e)){var t=null===e||void 0===e?void 0:e.werte,n=Object.keys(t).sort();return n[n.length-1]}},z=function(e){if(y(e)){var t=null===e||void 0===e?void 0:e.werte,n=Object.keys(t).sort();if(n.length>1)return n[n.length-2]}},C=function(e){var t=I(e),n=null===e||void 0===e?void 0:e.werte;if(t)return{values:n[t],year:t}},L=function(e){if(e&&13===e.length)return e[12]},D=function(e){return void 0!==(null===e||void 0===e?void 0:e.bis)?"abgebaut":"aktiv"},N=function(e){if("aktiv"===D(e)){var t,n=null===(t=_(e))||void 0===t?void 0:t.value;return console.log("lym",n),n>0&&n<=35?"unauffaellig":n>35&&n<=40?"auffaellig":n>40?"warnend":9999===n?"inaktiv":"unknown"}return D(e)},S=function(e){var t=N(e);return x[t].signature},A=function(){var e=Object(a.useContext)(O.a).selectedFeature;return console.log("selectedFeature.properties",null===e||void 0===e?void 0:e.properties),Object(w.jsx)("div",{})},J=function(e){var t,n=L(null===(t=C(e))||void 0===t?void 0:t.values),a=I(e),r=L(function(e){var t=z(e),n=null===e||void 0===e?void 0:e.werte;if(t)return n[t]}(e)),o=z(e),i="";return(n||r)&&(i="gewichtete Jahresmittelwerte:",n&&(i=i+"\n"+n+" \xb5g/m\xb3 ("+a+")"),r&&(i=i+"\n"+r+" \xb5g/m\xb3 ("+o+")")),console.log("ret",i),i},R=function(e){var t=_(e);if(null===e||void 0===e?void 0:e.bis){var n=new Date(null===e||void 0===e?void 0:e.bis);return console.log("demontiert",n.getMonth(),n.getFullYear()),"Diese Messstation ist seit ".concat(M[n.getMonth()-1]," ").concat(n.getFullYear()," abmontiert.")}return t?9999!==t.value?t.value+" \xb5g/m\xb3 ("+M[t.monthIndex]+" "+t.year+")":"F\xfcr "+M[t.monthIndex]+" "+t.year+"liefert diese Messstation keinen Messwert":"Diese Messstation ist abmontiert"},T=function(){var e=Object(b.a)(p.a.mark((function e(t){var n,a,r,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.b)(t,(function(e){return"luft/"+S(e)}));case 2:return(n=e.sent).status=N(n),a=(null===n||void 0===n?void 0:n.name)||"Kein Namexx","Feature",!1,r=null===n||void 0===n?void 0:n.geojson,n.color=x[n.status].color,o={header:x[n.status].header,title:R(n),additionalInfo:J(n),subtitle:Object(w.jsxs)("span",{children:[null===n||void 0===n?void 0:n.strasse," ",null===n||void 0===n?void 0:n.hausnummer," ",(null===n||void 0===n?void 0:n.zusatzinfo)&&Object(w.jsxs)("span",{children:["(",null===n||void 0===n?void 0:n.zusatzinfo,")"]})]})},n.info=o,n.foto="https://www.wuppertal.de/geoportal/luftmessstationen/fotos/NO2_test.jpg",e.abrupt("return",{text:a,type:"Feature",selected:false,geometry:r,crs:{type:"name",properties:{name:"urn:ogc:def:crs:EPSG::25832"}},properties:n});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=n(46);var B=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1];return Object(a.useEffect)((function(){F(r),document.title="Luftmessstationenskarte Wuppertal"}),[]),Object(w.jsx)(u.c,{appKey:"LuftmessstationenWuppertal.TopicMap",featureItemsURL:"https://wupp-topicmaps-data.cismet.de/data/no2.data.json",getFeatureStyler:f.a,featureTooltipFunction:function(e){return null===e||void 0===e?void 0:e.text},convertItemToFeature:T,clusteringOptions:{iconCreateFunction:Object(E.c)(30,(function(e){return e.color}))},children:Object(w.jsxs)(c.a,{locatorControl:!0,gazData:n,infoBox:Object(w.jsx)(d.a,{pixelwidth:350,config:{city:"Wuppertal",navigator:{noun:{singular:"Messstation",plural:"Messstationen"}},noCurrentFeatureTitle:"Keine Messtationen gefunden",noCurrentFeatureContent:""}}),children:[Object(w.jsx)(v.a,{title:"R\xfcckfrage zu den Messwerten",action:function(){var e=document.createElement("a");e.setAttribute("type","hidden");var t="\n",n="mailto:luftreinhaltung@stadt.wuppertal.de?subject=R\xfcckfrage zu Messwerten&body="+encodeURI("Sehr geehrte Damen und Herren,".concat(t).concat(t," zu der Luftmessstationskarte "))+encodeURI("auf".concat(t).concat(t))+"".concat(window.location.href.replace(/&/g,"%26").replace(/#/g,"%23"))+encodeURI("".concat(t)+"".concat(t)+"habe ich folgende Frage:".concat(t)+"".concat(t).concat(t).concat(t).concat(t)+"Mit freundlichen Gr\xfc\xdfen".concat(t)+"".concat(t)+"".concat(t));document.body.appendChild(e),e.href=n,e.click()}}),Object(w.jsx)(l.a,{}),Object(w.jsx)(A,{})]})})},P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,682)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),o(e),i(e)}))};i.a.render(Object(w.jsx)(r.a.StrictMode,{children:Object(w.jsx)(B,{})}),document.getElementById("root")),P()}},[[677,1,2]]]);
//# sourceMappingURL=main.70b587da.chunk.js.map